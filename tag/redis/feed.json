{
    "version": "https://jsonfeed.org/version/1",
    "title": "慕青の迷途 • All posts by \"redis\" tag",
    "description": "时雨病重症患者！！！",
    "home_page_url": "https://cecilia.cool",
    "items": [
        {
            "id": "https://cecilia.cool/2022/11/05/Database/Redis/Redis(2)-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/",
            "url": "https://cecilia.cool/2022/11/05/Database/Redis/Redis(2)-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/",
            "title": "Redis(2)--数据类型",
            "date_published": "2022-11-04T16:39:36.000Z",
            "content_html": "<h1 id=\"数据类型\"><a class=\"anchor\" href=\"#数据类型\">#</a> 数据类型</h1>\n<p>在 <code>redis</code>  中，所有 <code>key</code>  都是字符串，讨论数据结构时，都是存储值的数据类型，常见的包括：</p>\n<ul>\n<li>String：字符串、整数或浮点数。对整个字符串或字符串的一部分进行操作；对整数或浮点数进行自增或自减操作。</li>\n<li>List：对链表的两端进行 push 和 pop 操作，读取单个或多个元素；根据值查找或删除元素；</li>\n<li>Set：字符串的集合，包含基础的方法有看是否存在添加、获取、删除；还包含计算交集、并集、差集等。</li>\n<li>Zset：字符串成员与浮点数分数之间的有序映射；元素的排列顺序由分数的大小决定；包含方法有添加、获取、删除单个元素以及根据分值范围或成员来获取元素。</li>\n<li>Hash：添加、获取、删除单个元素</li>\n</ul>\n<blockquote>\n<p>关于集合的命令，有啥想不起就去搜。</p>\n</blockquote>\n<h2 id=\"string\"><a class=\"anchor\" href=\"#string\">#</a> String</h2>\n<p>记住上一篇文章讲的几个命令即可： <code>get,set,del,incr,decr,incrby,decrby</code> 。</p>\n<h2 id=\"list\"><a class=\"anchor\" href=\"#list\">#</a> List</h2>\n<p>可以实现消息队列，将任务存 <code>PUSH</code>  在 List 中，工作线程再 <code>POP</code>  操作将任务取出执行。</p>\n<p><img data-src=\"https://s3.bmp.ovh/imgs/2022/11/05/e621c88a8c58d5a8.jpg\" alt=\"\" /></p>\n<p>两边都可以增删节点，对应方法就是 <code>L/RPUSH</code>  和 <code>L/RPOP</code> ，具体使用为：</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">></span> lpush mylist <span class=\"token number\">1</span> <span class=\"token number\">2</span> ll ls mem</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">></span> lrange mylist <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\t<span class=\"token comment\">-- lrange 获取列表所有值</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"mem\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"ls\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"ll\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"2\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"1\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">></span> lindex mylist <span class=\"token operator\">-</span><span class=\"token number\">1</span>\t<span class=\"token comment\">-- lindex 根据索引获取元素 (0 开始)，负数也可以，-1 表示最后一个</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token string\">\"1\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">></span> lindex mylist <span class=\"token number\">10</span>        <span class=\"token comment\">-- index 不在 mylist 的区间范围内</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">(</span>nil<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>还有一些骚操作：</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 从前一个数组的最后取一个数出来放到另一个数组的头部，并返回元素</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>rpoplpush 当前数组 目标数组</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">-- 如果列表中没有元素，那么就等待，如果指定时间（秒）内被添加了数据，那么就执行 pop 操作，如果超时就作废，支持同时等待多个列表，只要其中一个列表有元素了，那么就能执行</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>blpop <span class=\"token operator\">&lt;</span><span class=\"token keyword\">key</span><span class=\"token operator\">></span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> timeout</pre></td></tr></table></figure><h2 id=\"set\"><a class=\"anchor\" href=\"#set\">#</a> Set</h2>\n<p>不同元素无序排列，直接看命令：</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">></span> sadd myset hao hao1 xiaohao hao\t<span class=\"token comment\">-- sadd 添加若干个成员</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">></span> smembers myset\t<span class=\"token comment\">-- 返回所有成员</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaohao\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"hao1\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"hao\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">></span> sismember myset hao\t<span class=\"token comment\">-- 判断集合 myset 是否有集合 hao 成员</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">-- 随机移除一个幸运儿</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>spop <span class=\"token operator\">&lt;</span><span class=\"token keyword\">key</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">-- 移除指定</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>srem <span class=\"token operator\">&lt;</span><span class=\"token keyword\">key</span><span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr></table></figure><p>集合之间的运算：</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 集合之间的差集</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>sdiff <span class=\"token operator\">&lt;</span>key1<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>key2<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">-- 集合之间的交集</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>sinter <span class=\"token operator\">&lt;</span>key1<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>key2<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">-- 求并集</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>sunion <span class=\"token operator\">&lt;</span>key1<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>key2<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">-- 将集合之间的差集存到目标集合中</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>sdiffstore 目标 <span class=\"token operator\">&lt;</span>key1<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>key2<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">-- 同上</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>sinterstore 目标 <span class=\"token operator\">&lt;</span>key1<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>key2<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">-- 同上</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>sunionstore 目标 <span class=\"token operator\">&lt;</span>key1<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>key2<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">-- 移动指定值到另一个集合中</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>smove <span class=\"token operator\">&lt;</span><span class=\"token keyword\">key</span><span class=\"token operator\">></span> 目标 <span class=\"token keyword\">value</span></pre></td></tr></table></figure><h2 id=\"hash\"><a class=\"anchor\" href=\"#hash\">#</a> Hash</h2>\n<p>string 类型的 field（字段） 和 value（值） 的映射表，hash 特别适合用于存储对象。</p>\n<p><img data-src=\"https://s3.bmp.ovh/imgs/2022/11/05/25fd082b2f3cc590.jpg\" alt=\"\" /></p>\n<p>假设散列表名是 user：</p>\n<ul>\n<li>添加： <code>hset user key1 val1</code> 。</li>\n<li>获取值： <code>hget user key1</code> 。</li>\n<li>获取所有键值对： <code>hgetall user</code> 。</li>\n<li>移出键： <code>hdel user key</code> 。</li>\n</ul>\n<h2 id=\"zset\"><a class=\"anchor\" href=\"#zset\">#</a> Zset</h2>\n<p>每个元素都会关联一个 double 类型的分数。redis 正是通过分数来为集合中的成员进行从小到大的排序。</p>\n<p>有序集合是通过两种数据结构实现：</p>\n<ol>\n<li><strong>压缩列表 (ziplist)</strong>: ziplist 是为了提高存储效率而设计的一种特殊编码的双向链表。它可以存储字符串或者整数，存储整数时是采用整数的二进制而不是字符串形式存储。它能在 O (1) 的时间复杂度下完成 list 两端的 push 和 pop 操作。但是因为<strong>每次操作都需要重新分配 ziplist 的内存</strong>，所以实际复杂度和 ziplist 的内存使用量相关</li>\n<li><strong>跳跃表（zSkiplist)</strong>: 跳跃表的性能可以保证在查找，删除，添加等操作的时候在对数期望时间内完成，这个性能是可以和平衡树来相比较的，而且在实现方面比平衡树要优雅，这是采用跳跃表的主要原因。跳跃表的复杂度是 O (log (n))。</li>\n</ol>\n<p>相关命令：</p>\n<ul>\n<li>添加： <code>zadd table key1 val1 score</code> 。</li>\n<li>获取： <code>zrange table key1 </code> 。</li>\n<li>删除： <code>zrem table key1 </code> 。</li>\n</ul>\n<p>因为都有一个分数值，所以可以根据分数值操作：</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 通过分数段查看</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>zrangebyscore <span class=\"token operator\">&lt;</span><span class=\"token keyword\">key</span><span class=\"token operator\">></span> <span class=\"token keyword\">start</span> stop <span class=\"token punctuation\">[</span>withscores<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">limit</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">-- 统计分数段内的数量</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>zcount <span class=\"token operator\">&lt;</span><span class=\"token keyword\">key</span><span class=\"token operator\">></span>  <span class=\"token keyword\">start</span> stop</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">-- 根据分数获取指定值的排名</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>zrank <span class=\"token operator\">&lt;</span><span class=\"token keyword\">key</span><span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">value</span><span class=\"token operator\">></span></pre></td></tr></table></figure><h1 id=\"参考\"><a class=\"anchor\" href=\"#参考\">#</a> 参考</h1>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9wZGFpLnRlY2gvbWQvZGIvbm9zcWwtcmVkaXMvZGItcmVkaXMtZGF0YS10eXBlcy5odG1s\">https://pdai.tech/md/db/nosql-redis/db-redis-data-types.html</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cueXVxdWUuY29tL3Fpbmdrb25neGlhZ3Vhbmcvc3ByaW5nL25rYTJ2eiNMaXN0\">https://www.yuque.com/qingkongxiaguang/spring/nka2vz#List</span></p>\n</blockquote>\n",
            "tags": [
                "Redis"
            ]
        },
        {
            "id": "https://cecilia.cool/2022/11/03/Database/Redis/Redis(1)-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/",
            "url": "https://cecilia.cool/2022/11/03/Database/Redis/Redis(1)-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/",
            "title": "Redis(1)--安装与基本操作",
            "date_published": "2022-11-03T02:57:36.000Z",
            "content_html": "<h1 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> 安装</h1>\n<blockquote>\n<p>官网提供的是 Mac 和 Linux 的安装包，并没有 windows 的，但是 <code>github</code>  有相关的开源项目。</p>\n</blockquote>\n<p>开源地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Rwb3JhZG93c2tpL3JlZGlzL3JlbGVhc2Vz\">https://github.com/tporadowski/redis/releases</span></p>\n<p>直接下载 <code>zip</code>  安装包就行了，然后运行服务端打开<strong> redis-server.exe</strong> 文件即可。客户端打开<strong> redis-cli.exe</strong> 即可。</p>\n<p>如果客户端想要使用本地 cmd，则在 <code>redis</code>  根目录下执行命令： <code>redis-cli.exe -h localhost</code> 。默认是 6379 端口。</p>\n<p>Linux (ubuntu) 下载 Redis：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> redis-server</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 查看服务，按 q 退出</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">sudo</span> systemctl status redis-server</pre></td></tr></table></figure><p>可以远程访问 Redis，但是需要配置一下 <code>/etc/redis.conf</code>  文件，定位到 <code>bind 0.0.0.0 ::1</code> ，取消这行的注释，保存退出，重启 Redis 服务：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> systemctl restart redis-server</pre></td></tr></table></figure><p>配置防火墙，允许网络流量通过 TCP 端口 <code>6379</code> 。</p>\n<p>通常你想要允许从一个指定 IP 地址或者一个指定 IP 范围来访问 Redis 服务器。例如，想要允许从 <code>192.168.121.0/24</code>  的连接，运行下面的命令：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> ufw allow proto tcp from <span class=\"token number\">192.168</span>.121.0/24 to any port <span class=\"token number\">6379</span></pre></td></tr></table></figure><p>此时，你应该可以从远程位置通过 TCP 连接到 Redis 的 6379 端口。</p>\n<p>想要验证所有设置都设置好了，你可以尝试使用 <code>redis-cli</code>  从你的远程机器上 ping 一下 Redis 服务器。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>redis-cli <span class=\"token parameter variable\">-h</span> <span class=\"token operator\">&lt;</span>REDIS_IP_ADDRESS<span class=\"token operator\">></span> <span class=\"token function\">ping</span></pre></td></tr></table></figure><p>这个命令将会返回一个响应： <code>PONG</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>PONG</pre></td></tr></table></figure><h1 id=\"应用场景\"><a class=\"anchor\" href=\"#应用场景\">#</a> 应用场景</h1>\n<ul>\n<li>热点数据的缓存：作为缓存使用，保存数据的方式一般是两种，读取数据前先读取 Redis，次级是数据库，并将数据拉入 Redis（可能会缓存击穿）；插入数据时同时写入 Redis。</li>\n<li>限时业务：比如验证码校验，60s 内有效。</li>\n<li>计数器：redis 的 incrby 原子递增，可以运用于高并发秒杀</li>\n<li>好友关系存储：在微博应用中，每个用户关注的人存在一个集合中，就很容易实现求两个人的共同好友功能。Redis 利用集合的一些命令，比如求交集、并集、差集等。</li>\n<li>简单队列：由于 Redis 有 list push 和 list pop 这样的命令，所以能够很方便的执行队列操作。</li>\n</ul>\n<h1 id=\"基本使用\"><a class=\"anchor\" href=\"#基本使用\">#</a> 基本使用</h1>\n<p><code>Redis</code>  是一个键值数据库，因此，可以像 <code>Map</code>  一样的操作方式，通过键值对向 <code>Redis</code>  数据库中添加数据（操作起来类似于向一个 <code>HashMap</code>  中存放数据）。</p>\n<p>现在打开客户端或者使用 cmd 连接到服务端。</p>\n<p>redis 的数据库由整数索引标识（而不是名称），默认连接到 redis 使用 0 号数据库，默认 16 个数据库（可以通过配置文件修改数据库总数）。</p>\n<p>相关命令操作：</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 切换数据库</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">select</span> 序号</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 添加 / 修改数据；添加多个数据：mset key1 value1 key2 value2..</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">set</span> <span class=\"token keyword\">key</span> <span class=\"token keyword\">value</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 获取数据</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>get <span class=\"token keyword\">key</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 删除数据</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>del <span class=\"token keyword\">key</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># 设置数据过期时间，自动删除</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">set</span> <span class=\"token keyword\">key</span> <span class=\"token keyword\">value</span> EX 秒</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">set</span> <span class=\"token keyword\">key</span> <span class=\"token keyword\">value</span> PX 毫秒</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># 为单独的键设置过期时间，转为永久就是 persist key</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>expire <span class=\"token keyword\">key</span> 秒</pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># 查询过期时间剩余 毫秒就是 pttl</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>ttl <span class=\"token keyword\">key</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># 查询所有键值</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">keys</span> <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># 某个键是否存在</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">exists</span> <span class=\"token keyword\">key</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\"># 随机拿一个键</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>randomkey</pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\"># 数据库内容迁移</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>move <span class=\"token keyword\">key</span> 数据库序号</pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\"># 修改键名 renamex 会检查新名称是否存在</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">rename</span> <span class=\"token keyword\">key</span> 新的键名</pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\"># 存放的数据是数字，自增自减操作</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>incr <span class=\"token keyword\">key</span>\t<span class=\"token comment\"># a++</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>incrby <span class=\"token keyword\">key</span> b\t<span class=\"token comment\"># a = a+b</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>decr <span class=\"token keyword\">key</span>\t<span class=\"token comment\"># a--</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token comment\"># 查看数据类型</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token keyword\">type</span> <span class=\"token keyword\">key</span></pre></td></tr></table></figure><h1 id=\"参考\"><a class=\"anchor\" href=\"#参考\">#</a> 参考</h1>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9wZGFpLnRlY2gvbWQvZGIvbm9zcWwtcmVkaXMvZGItcmVkaXMtaW50cm9kdWNlLmh0bWw=\">https://pdai.tech/md/db/nosql-redis/db-redis-introduce.html</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cueXVxdWUuY29tL3Fpbmdrb25neGlhZ3Vhbmcvc3ByaW5nL25rYTJ2eg==\">https://www.yuque.com/qingkongxiaguang/spring/nka2vz</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kZXZlbG9wZXIvYXJ0aWNsZS8xNjM5NjU4\">https://cloud.tencent.com/developer/article/1639658</span></p>\n</blockquote>\n",
            "tags": [
                "Redis"
            ]
        }
    ]
}