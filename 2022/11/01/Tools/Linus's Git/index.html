<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><link rel="mask-icon" href="/images/logo.svg" color=""><link rel="manifest" href="/images/manifest.json"><meta name="msapplication-config" content="/images/browserconfig.xml"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="慕青の迷途" href="https://cecilia.cool/rss.xml"><link rel="alternate" type="application/atom+xml" title="慕青の迷途" href="https://cecilia.cool/atom.xml"><link rel="alternate" type="application/json" title="慕青の迷途" href="https://cecilia.cool/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="tools"><link rel="canonical" href="https://cecilia.cool/2022/11/01/Tools/Linus's%20Git/"><title>Linus's Git | 慕青の迷途 = 冲天香阵透长安，满城尽带黄金甲</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Linus's Git</h1><div class="meta"><span class="item" title="创建时间：2022-11-01 16:30:06"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-11-01T16:30:06+08:00">2022-11-01</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>5.5k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>5 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">慕青の迷途</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicmnywqgpj20zk0m8dwx.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gipew28b65j20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1giclffsa1cj20zk0m811l.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1giciryrr3rj20zk0m8nhk.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gipet4bz0yj20zk0m8e81.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gipesrnqv3j20zk0m8ava.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cecilia.cool/2022/11/01/Tools/Linus's%20Git/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Cyan"><meta itemprop="description" content="冲天香阵透长安，满城尽带黄金甲, 时雨病重症患者！！！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="慕青の迷途"></span><div class="body md" itemprop="articleBody"><blockquote><p>Linus 大佬团队俩星期写出来的 Git</p></blockquote><h1 id="开源发展史"><a class="anchor" href="#开源发展史">#</a> 开源发展史</h1><blockquote><p>提到 Linus，就不得不提到这段历史，这部分了解的时候真的让人激动，可以说，Linux 的发展，极大推动（开创）了开源。</p></blockquote><p>强烈推荐这个视频：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXpWNDExZDdMYS8/c3BtX2lkX2Zyb209MzMzLjMzNy5zZWFyY2gtY2FyZC5hbGwuY2xpY2smYW1wO3ZkX3NvdXJjZT01YWNmNWE3YjIzZDI4ZTc2MzNlNWE5YjM4MWM1N2M0Mg==">你不知道的「开源」60 年秘史</span>。</p><p>视频讲得非常清楚，所以我这里就简单的总结一点点：</p><ul><li>贝尔实验室的<strong> Ken Thompson</strong> 和 <strong>Dennis Ritchie</strong> 开发了 UNICS，后来被神秘地改成了 UNIX。</li><li>Unix 源码分享出去，K 神在休假时还和加州大学伯克利分校的研究小组共同改进 Unix。</li><li>研究小组的 Bill Joy 开发 BSD，成为 Unix 最大分支。毕业后创建 Sun 公司，进而创建 SunOs 系统（Unix 逐步商业化）。</li><li>AT&amp;T 注册 Unix 商标，开启了商业化 Unix 之路，Unix 第 7 版开始，禁止大学使用 Unix 源代码。</li><li>阿姆斯特丹自由大学计算机科学系教授<strong> Andrew Tanenbaum</strong> 为了在课上更好演示操作系统细节，自己开发了 Minix，即【迷你 Unix】，并作为《操作系统设计与实现》艺术参考案例。</li><li><strong>Richard Stallman</strong> 作为 MIT 人工智能实验室研究员，推崇黑客文化，1984 年辞去 MIT 工作，随后开发类 Unix 系统 ——GNU（全称为：GNU IS NOT UNIX），次年成立自由软件基金会。</li><li>《操作系统设计与实现》这本书为 Linux 之父 ——<strong>Linus Torvalds</strong> 推向人生巅峰，之后开发出 Linux。</li></ul><blockquote><p>开源宇宙中子星，商业软件面壁人的 Linus・你的上帝・Torvalds。美国时代周刊评价：“有些人生来就具有统率百万人的领袖风范；另一些人则是为写出颠覆世界的软件而生。唯一一个能同时做到这两者的人，就是 Linus Torvalds”。Linus 自己评价自己：“My name is Linus , and I am your God.”</p></blockquote><ul><li>Linux 代码完全开源，早年参与开发的黑客水平较高，直到今天，Linux 社区内核的开发才被程序员们认为是【真正的编程】。</li></ul><h1 id="基本使用"><a class="anchor" href="#基本使用">#</a> 基本使用</h1><p>安装这么简单的事就不讲了。一些介绍就是：分布式版本控制系统，远程仓库 巴拉巴拉的。</p><h2 id="基本模块"><a class="anchor" href="#基本模块">#</a> 基本模块</h2><p>这部分一定要仔细，git 的命令与不同模块息息相关。</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/11/01/5a93f2899a2cac45.png" alt=""></p><ul><li><p>工作目录：存放我们正在写的代码（当我们新版本开发完成之后，就可以进行新版本的提交）</p></li><li><p>暂存区：暂时保存待提交的内容（新版本提交后会存放到本地仓库）</p></li><li><p>本地仓库：位于我们电脑上的一个版本控制仓库（存放的就是当前项目各个版本代码的增删信息），可以是随便一个文件夹作为本地仓库， <code>git init</code> 生成 <code>.git</code> 目录，仓库目录就是工作目录。</p></li><li><p>远程仓库：位于服务器上的版本控制仓库（服务器上的版本信息可以由本地仓库推送上去，也可以从服务器抓取到本地仓库）</p></li></ul><h2 id="创建仓库"><a class="anchor" href="#创建仓库">#</a> 创建仓库</h2><blockquote><p><code>github</code> 和 <code>gitee</code> 都可以，看自己能力创建捏，这里建议仓库私有，你拿来练手 <code>git</code> 的仓库就没必要公开了。最近做课设，团队作业，我在 <code>Gitee</code> 上还搜到了好几个认识的同学的仓库，还有几个老哥是实名上网，笑😥。</p></blockquote><p>创建好后，拿到仓库地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20veHh4L3RlYWNoLWxlYXJuaW5nLmdpdA==">https://gitee.com/xxx/teach-learning.git</span> （这个仓库我之后会删了。。），本地随便创建一个文件夹 <code>Teach-learning</code> 。进入文件夹，右键 <code>git bash here</code> 初始化仓库 <code>git init</code> 。</p><p>你应该还看到了有一个 <code>Git GUI Here</code> ， <code>GUI</code> 就是图形化， <code>Bash</code> 是命令行。</p><p>如果从来没有配置过用户名和邮箱，先配置一下：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"Your Name"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"email@example.com"</span></pre></td></tr></table></figure><p>现在远程仓库和本地仓库都创建好了，但是先不需要管远程仓库，我们这里啥都没配置，本地仓库也不知道远程仓库地址。其实，你如果觉得 <code>git</code> 提供的 UI 不好看，也可以使用 cmd 终端执行 <code>git</code> 命令。</p><h1 id="本地操作"><a class="anchor" href="#本地操作">#</a> 本地操作</h1><p>现在的都做都是在和本地仓库进行交互，与远程仓库没有关系。</p><h2 id="添加与提交"><a class="anchor" href="#添加与提交">#</a> 添加与提交</h2><p>我们先看一下工作目录的文件与本地仓库：</p><p>执行 <code>git status</code> 查看本地仓库状态，结果是：<strong>No commits yet</strong>。表示我们还没有向仓库提交任何内容。</p><p>创建一个文本文件 <code>test.txt</code> ，随便写内容: <code>hello world</code> ，再查看状态：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>On branch master</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>No commits yet</pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>Untracked files:</pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">(</span>use <span class="token string">"git add &lt;file>..."</span> to include <span class="token keyword">in</span> what will be committed<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        test.txt</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>nothing added to commit but untracked files present <span class="token punctuation">(</span>use <span class="token string">"git add"</span> to track<span class="token punctuation">)</span></pre></td></tr></table></figure><p>Untracked files 是未追踪文件的意思， <code>git</code> 不会记录它的变化，始终将其当做一个新创建的文件。加入到暂存区，该文件就会自动变为追踪状态：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> <span class="token function">add</span> test.txt <span class="token comment">#也可以 add . 一次性添加目录下所有的</span></pre></td></tr></table></figure><p>再次 <code>git status</code> 发现文件颜色变成绿色了。其实在 IDEA 里面也是这样，项目中文件未追踪，颜色是红色的（前提是项目已经使用了 Git）：</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/11/01/1e4323523100a5bf.jpg" alt=""></p><p><code>1.txt</code> 是我新建的，此时是红色的，然后 IDEA 提醒我叫我添加该文件到 Git，<strong>也就是将文件交给 Git 管理</strong>。选择 add 后就变绿色了。</p><p><strong>此时文件就在暂存区了</strong>，使用 <code>commit</code> 命令就可以提交到本地仓库中了：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'提交test.txt文件'</span> <span class="token comment"># -m 就是添加提交消息，meassage</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment"># 提交后暂存区就没东西了，之后要提交，就必须先 commit</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># -a 选项可以将没有加入到暂存区的文件放入暂存区再提交</span></pre></td></tr></table></figure><blockquote><p>现在先不演示在 IDEA 中的样子，先把基本学明白。</p></blockquote><p>查看提交记录：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Cyan<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>Teach-learning<span class="token operator">></span>git log</pre></td></tr><tr><td data-num="2"></td><td><pre>commit ed549112c66212a24d659583ac2fe472eec9b378 <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> master<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>Author: cyan <span class="token operator">&lt;</span>我的邮箱<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>Date:   Tue Nov <span class="token number">1</span> <span class="token number">17</span>:15:28 <span class="token number">2022</span> +0800</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token string">'提交test.txt文件'</span></pre></td></tr></table></figure><p>第一行是提交的 <code>commitID</code> ，此时再查看状态，就会提示工作目录没有需要提交的。</p><blockquote><p><code>git log --all --graph --oneline</code> 挺好用的</p></blockquote><p>尝试修改一下 <code>test.txt</code> （删除 hello world 吧），由于当前文件已经是被追踪状态，那么 git 会去跟踪它的变化，如果说文件发生了修改，那么我们再次查看状态会得到下面的结果：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Cyan<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>Teach-learning<span class="token operator">></span>git status</pre></td></tr><tr><td data-num="2"></td><td><pre>On branch master</pre></td></tr><tr><td data-num="3"></td><td><pre>Changes not staged <span class="token keyword">for</span> commit:</pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">(</span>use <span class="token string">"git add &lt;file>..."</span> to update what will be committed<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">(</span>use <span class="token string">"git restore &lt;file>..."</span> to discard changes <span class="token keyword">in</span> working directory<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        modified:   test.txt	<span class="token comment"># 红色的</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>no changes added to commit <span class="token punctuation">(</span>use <span class="token string">"git add"</span> and/or <span class="token string">"git commit -a"</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>此时修改的文件在工作目录，需要再次提交到暂存区（ <code>git add .</code> )，然后提交 <code>git commit</code> 。</p><p>可以创建一个 <code>.gitignore</code> 文件来确定一个文件忽略列表，如果忽略列表中的文件存在且不是被追踪状态，那么 git 不会对其进行任何检查：</p><figure class="highlight yaml"><figcaption data-lang="YAML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 这样就会匹配所有以 txt 结尾的文件</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token important">*.txt</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 虽然上面排除了所有 txt 结尾的文件，但是这个不排除</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag">!666.txt</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 也可以直接指定一个文件夹，文件夹下的所有文件将全部忽略</span></pre></td></tr><tr><td data-num="6"></td><td><pre>test/</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 目录中所有以 txt 结尾的文件，但不包括子目录</span></pre></td></tr><tr><td data-num="8"></td><td><pre>xxx/<span class="token important">*.txt</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment"># 目录中所有以 txt 结尾的文件，包括子目录</span></pre></td></tr><tr><td data-num="10"></td><td><pre>xxx/<span class="token important">**/*.txt</span></pre></td></tr></table></figure><h2 id="回滚"><a class="anchor" href="#回滚">#</a> 回滚</h2><p>每提交一次，就是一个版本，通过 <code>commitID</code> 就可以回滚到指定版本。（ID 通过 <code>git log</code> 查看）</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> reset <span class="token parameter variable">--hard</span> commitID</pre></td></tr></table></figure><p>执行后，会直接重置为那个时候的状态。再次查看提交日志，我们发现之后的日志全部消失了。</p><p>要是现在我又想回去呢？我们可以通过查看所有<strong>分支</strong>的所有操作记录：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> reflog</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment"># 就能找到之前的 commitID，再次重置即可</span></pre></td></tr></table></figure><h2 id="分支"><a class="anchor" href="#分支">#</a> 分支</h2><p>为什么要有分支：</p><ul><li>基于当前项目的基础功能，我们想做成不同方向的需求，开发不同方向的功能，就需要分支。</li><li>像一些开源项目就有很多分支，一方面是各个分支功能实现略有不同，另一方面也方便不同人开发，也就是一部分人开发某个分支，另一部分人开发另一个分支啥的。</li></ul><p>像有些项目一条路走到黑的，就没必要使用分支；如果是类似前后端分离，MVVM 之类的，就可以开多个分支。</p><p>我的看法就是有需求就开分支，不要吃饱了撑的。</p><p>查看当前分支： <code>git branch</code> 。默认分支是 <code>master</code> ，以前 <code>github</code> 的默认分支我记得是 <code>main</code> ，后来就改了。 <code>master</code> 一般是正式版本更新。</p><p>相关命令：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 基于当前分支创建一个新的分支</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> branch <span class="token builtin class-name">test</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 删除分支</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">git</span> branch <span class="token parameter variable">-d</span> <span class="token builtin class-name">test</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 切换分支</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">git</span> checkout <span class="token builtin class-name">test</span></pre></td></tr></table></figure><p>不同分支的文件内容是相互隔离的</p><h2 id="分支合并"><a class="anchor" href="#分支合并">#</a> 分支合并</h2><blockquote><p>这部分是重点难点，</p></blockquote><p>两个分支想要合并，就不能存在冲突。假设有一个文件，在 A 分支修改提交了，在 B 分支也修改提交了，A 和 B 分支合并时，该文件哪个版本是最新的呢？哪个该被覆盖呢？</p><p>我们重新建一个本地仓库演示一下：</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/11/01/797211819dc89825.jpg" alt=""></p><p>目前是，有 A.txt 和 B.txt 两个文件，A，B 两个分支，两个文件写入内容后提交到 master 分支上。</p><p>我们合并 AB 两个分支来演示分支合并：</p><ul><li>切入到 A 分支，对 A.txt 文件新增一行（就是修改）：A branch add a row， <code>commit</code> 提交。</li><li>切入到 B 分支，此时查看 A.txt 文件，并没有 A 分支修改的内容（分支之间相互隔离）。</li><li>在 B 分支，对 B.txt 文件新增一行：B branch add a row， <code>commit</code> 提交。</li><li>再回到 A 分支，使用 <code>git log --all --graph --oneline</code> 查看一下。</li></ul><p><img data-src="https://s3.bmp.ovh/imgs/2022/11/01/1783faa4ee95c509.jpg" alt=""></p><p>分支情况一目了然。</p><ul><li>在 A 分支查看 A.txt，B.txt 两个分支的内容，并没有 B 分支修改的内容。</li><li>将 B 分支合并到 A 分支： <code>git merge B</code> ，再看一下 <code>log</code> 。</li></ul><p><img data-src="https://s3.bmp.ovh/imgs/2022/11/01/0db832aa135ba0a2.jpg" alt=""></p><p>检查 B.txt 内容，合并成功。</p><blockquote><p>分支合并的时候，A，B 分支的文件修改上没有冲突 ——A 分支 A.txt 修改了，而 B 分支的 A.txt 没有修改，所以 A.txt 合并可以成功（B.txt 同理），如果 A，B 分支都对 A 文件进行修改，就有可能发生冲突。</p></blockquote><h2 id="分支冲突"><a class="anchor" href="#分支冲突">#</a> 分支冲突</h2><p>现在我们再来演示一下分支冲突：</p><ul><li>A 分支对 A.txt 再新增一行：A branch add a row again，提交。</li><li>切换到 B 分支，同样在<strong> A.txt</strong> 新增一行：B branch add a row again，提交。</li></ul><p>现在两个分支在 A.txt 的修改上发生冲突，回到 A 分支，执行 <code>git merge B</code> ，就会出现冲突提示：</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/11/01/745dfafffb1deb4c.jpg" alt=""></p><p>我们调用 <code>git diff</code> 查看一下（必须合并失败之后才有用）：</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/11/01/27ad3de5711579e2.jpg" alt=""></p><p>解决办法就是，在当前分支下，要么回到没有冲突的版本，要么在 A.txt 文件中选定冲突的部分：</p><ul><li>A 分支下，回滚到修改 A.txt 之前的版本。</li><li>或者是，你现在去看一下 A.txt 的内容，里面就会加入 <code>&lt;&lt;HEAD</code> 之类的东西，你可以手动选择需要那部分，或者两部分都要（其实你可以随便改），然后再 commit 一下，然后在合并，就可以了。</li></ul><p><img data-src="https://s3.bmp.ovh/imgs/2022/11/01/fc46689075fb2f2d.jpg" alt=""></p><h1 id="远程仓库"><a class="anchor" href="#远程仓库">#</a> 远程仓库</h1><p>之前我们的操作都是在本地操作的，最后我们可以将一个分支的结果上传到远程仓库：</p><ol><li>先添加本地仓库： <code>git remote add 仓库名 远程仓库地址</code> 。</li><li>如果你是空文件夹，是想单纯拉取那些开源项目： <code>git pull 仓库名 远程分支</code> 。</li><li>然后自己修改代码后，就可以将本地的文件传过去了： <code>git push 远程仓库名称 本地分支名称[:远端分支名称]</code> 。 <code>git clone</code> 也可以</li></ol><p>第一次 push 一般需要用户名和密码。每次都需要指定分支映射，我们可以绑定分支： <code>git push --set-upstream 仓库名 本地分支:远程仓库</code> 。</p><p>如果只是一个人玩 <code>git</code> ，那么以上命令没有任何问题，可是如果是多人开发，我们假设一个场景：</p><p>AB 两人开发项目，他们在写代码时，有自己的本地仓库，然后有一天他俩都克隆了同一远程仓库，A1h 后将自己的代码交到远程仓库，再过 1h 后，B 执行 push 的话就会出错：<strong> <code>error: failed to push some refs to 'https://github.com/xx/xxx.git' hint: Updates were rejected because the remote contains work that you do</code> </strong>。</p><p>因为如果让他 push 上去，就会覆盖 A 的代码， <code>git push --force</code> 是强制 push，那么就会真的覆盖 A 的代码。</p><p>一旦一个本地仓库推送了代码，那么另一个本地仓库的推送会被拒绝，原因是当前文件已经被其他的推送给修改了，我们这边相当于是另一个版本，和之前两个分支合并一样，产生了冲突，因此我们只能去解决冲突问题。</p><p>一般就是通过 fetch 拉取下来，但是没有合并，然后自己再合并（其实就是 pull），至于他人写的会不会覆盖你的代码，如果没有修改同一个文件就不会，然后合并就会冲突。</p><p>一些问题：</p><ul><li><code>git push</code> 提示你需要先 <code>git pull</code> ，但是拉取后把你本地的代码全部覆盖了解决：首先要回滚到未覆盖版本，先 <code>git reflog</code> 查看之前提交的版本号，再 <code>git reset --hard 版本号</code> 。如果你是自己开发或者远程仓库的代码可以覆盖，建议直接 <code>git push -f</code> 强制推送，其他办法我也还没找到，因为这个情况我是使用 VS 遇到的，玄学。</li></ul><div class="tags"><a href="/tags/tools/" rel="tag"><i class="ic i-tag"></i> tools</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-11-15 20:39:16" itemprop="dateModified" datetime="2022-11-15T20:39:16+08:00">2022-11-15</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Cyan <i class="ic i-at"><em>@</em></i>慕青の迷途</li><li class="link"><strong>本文链接：</strong> <a href="https://cecilia.cool/2022/11/01/Tools/Linus's%20Git/" title="Linus&#39;s Git">https://cecilia.cool/2022/11/01/Tools/Linus's Git/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2022/10/29/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%B9%B6%E6%9F%A5%E9%9B%86/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva2.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giciub8ja1j20zk0m81ky.jpg" title="并查集"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>并查集</h3></a></div><div class="item right"><a href="/2022/11/02/Framework/Spring/Springboot(1)-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva2.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipewr8iypj20zk0m8b29.jpg" title="Springboot(1)--快速开发"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>Springboot(1)--快速开发</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E6%BA%90%E5%8F%91%E5%B1%95%E5%8F%B2"><span class="toc-number">1.</span> <span class="toc-text">开源发展史</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A8%A1%E5%9D%97"><span class="toc-number">2.1.</span> <span class="toc-text">基本模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%BB%93%E5%BA%93"><span class="toc-number">2.2.</span> <span class="toc-text">创建仓库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E6%93%8D%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">本地操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%B8%8E%E6%8F%90%E4%BA%A4"><span class="toc-number">3.1.</span> <span class="toc-text">添加与提交</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E6%BB%9A"><span class="toc-number">3.2.</span> <span class="toc-text">回滚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%94%AF"><span class="toc-number">3.3.</span> <span class="toc-text">分支</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6"><span class="toc-number">3.4.</span> <span class="toc-text">分支合并</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%94%AF%E5%86%B2%E7%AA%81"><span class="toc-number">3.5.</span> <span class="toc-text">分支冲突</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="toc-number">4.</span> <span class="toc-text">远程仓库</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Cyan" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Cyan</p><div class="description" itemprop="description">时雨病重症患者！！！</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">121</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">1</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">20</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0N5YW4tTg==" title="https:&#x2F;&#x2F;github.com&#x2F;Cyan-N"><i class="ic i-github"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2022/10/29/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%B9%B6%E6%9F%A5%E9%9B%86/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2022/11/02/Framework/Spring/Springboot(1)-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"></div><div class="status"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Cyan @ 慕青の迷途</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">461k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">6:59</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL = {
    path: '2022/11/01/Tools/Linus's Git/',
    favicon: {
      show: "（●´3｀●）やれやれだぜ",
      hide: "(´Д｀)大変だ！"
    },
    search : {
      placeholder: "文章搜索",
      empty: "关于 「 ${query} 」，什么也没搜到",
      stats: "${time} ms 内找到 ${hits} 条结果"
    },
    valine: true,fancybox: true,
    copyright: '复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>