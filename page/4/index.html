<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.7.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.7.0" type="image/png" sizes="32x32"><meta name="description" content="我始终勇往直前，百折不回...">
<meta property="og:type" content="website">
<meta property="og:title" content="慕青的日记">
<meta property="og:url" content="https://cecilia.cool/page/4/index.html">
<meta property="og:site_name" content="慕青的日记">
<meta property="og:description" content="我始终勇往直前，百折不回...">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Cyan">
<meta name="twitter:card" content="summary"><title>慕青的日记 | Cyan</title><link ref="canonical" href="https://cecilia.cool/page/4/index.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.7.0"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"carbon","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.2.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">标签</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">慕青的日记</div><div class="header-banner-info__subtitle">Cyan</div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/08/01/Shell/%E6%9E%84%E5%BB%BA%E5%9F%BA%E6%9C%AC%E8%84%9A%E6%9C%AC(2)/">构建基本脚本(2)</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-08-01</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-08-04</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="数学运算"   >
          <a href="#数学运算" class="heading-link"><i class="fas fa-link"></i></a><a href="#数学运算" class="headerlink" title="数学运算"></a>数学运算</h1>
      <p>在脚本中进行数学运算有很多种方式，你可以从下面选几种喜欢的</p>
<ul>
<li><code>exper</code>命令，支持基本的（逻辑、比较）运算符，对于有歧义的符号(如<code>*</code>)，需要用<code>\*</code>，<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-comm-expr.html" >传送门</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>。</li>
</ul>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">expr</span> 表达式</span></span><br><span class="line">expr length “this is a test”	#计算字串长度</span><br><span class="line">expr 14 % 9		#整数运算</span><br><span class="line">expr 2 \* 10	#注意。参数和符号之间必须要有空格</span><br></pre></td></tr></table></div></figure>

<ul>
<li><code>$[表达式]</code>，更加方便，符号不会出现歧义，但是只能整数运算。</li>
</ul>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var1=$[1+5]</span><br></pre></td></tr></table></div></figure>

<ul>
<li><code>bc</code>计算器，实际上是一种编程语言，<code>-q</code>可以不显示<code>bash</code>计算器冗长的欢迎信息。浮点运算是由内建变量<code>scale</code>控制的，必须将这个值设置为计算结果希望保留的小数位数<code>scale</code>默认是0。</li>
</ul>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~$ bc</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">欢迎信息</span></span><br><span class="line">bc 1.07.1</span><br><span class="line">Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006, 2008, 2012-2017 Free Software Foundation, Inc.</span><br><span class="line">This is free software with ABSOLUTELY NO WARRANTY.</span><br><span class="line">For details type `warranty&#x27;.</span><br><span class="line">1+3</span><br><span class="line">4</span><br><span class="line">319+42</span><br><span class="line">361</span><br><span class="line"></span><br><span class="line">cyan@cyan-virtual-machine:~$ bc -q</span><br><span class="line">21/3</span><br><span class="line">7</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">内建变量不能在外面修改</span></span><br><span class="line">cyan@cyan-virtual-machine:~$ echo $scale</span><br><span class="line"></span><br><span class="line">cyan@cyan-virtual-machine:~$ bc -q</span><br><span class="line">scale=3 #进入bc修改内建变量</span><br><span class="line">21/3</span><br><span class="line">7.000</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">还有一种修改内建变量的方法，常用于脚本中，格式为<span class="built_in">echo</span> <span class="string">&quot;options;expression&quot;</span> | bc</span></span><br><span class="line">cyan@cyan-virtual-machine:~$ echo &#x27;21/4&#x27; | bc</span><br><span class="line">5</span><br><span class="line"></span><br><span class="line">cyan@cyan-virtual-machine:~$ echo &#x27;scale=4;21/4&#x27; | bc</span><br><span class="line">5.2500</span><br></pre></td></tr></table></div></figure>

<p>可见，通过管道，<code>bc</code>计算器还是挺好用的。再看一个输入重定向的例子</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~$ cat math.dat</span><br><span class="line">scale=4</span><br><span class="line">var1=1</span><br><span class="line">var2=29</span><br><span class="line">var3=5</span><br><span class="line">var1/var3+var2</span><br><span class="line"></span><br><span class="line">cyan@cyan-virtual-machine:~$ result=$(bc &lt; math.dat)</span><br><span class="line">cyan@cyan-virtual-machine:~$ echo $result</span><br><span class="line">29.2000</span><br></pre></td></tr></table></div></figure>

<p>有一点你可以看到，我们在<code>bc</code>中使用变量没有加<code>$</code>符号。最后，你也可以试试<strong>内联输入重定向</strong>，我想，应该没什么问题吧？</p>

        <h1 id="结构化语句"   >
          <a href="#结构化语句" class="heading-link"><i class="fas fa-link"></i></a><a href="#结构化语句" class="headerlink" title="结构化语句"></a>结构化语句</h1>
      <p>该部分我就直接给格式了，你记住了就会使用。</p>

        <h2 id="选择语句"   >
          <a href="#选择语句" class="heading-link"><i class="fas fa-link"></i></a><a href="#选择语句" class="headerlink" title="选择语句"></a>选择语句</h2>
      <p>我们如何对<code>if</code>中的条件进行判断？</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if condition1      #(退出状态码是0)   </span><br><span class="line">then</span><br><span class="line">    commands_1</span><br><span class="line">elif condition2</span><br><span class="line">then</span><br><span class="line">    commands_2</span><br><span class="line">else</span><br><span class="line">    commands_3</span><br><span class="line">fi</span><br></pre></td></tr></table></div></figure>

<p><code>condition</code>可以是一个命令的正确执行，也可以是字符串比较，数值比较，文件比较。</p>
<p>判断<code>condition</code>的命令为<code>test condtion</code>或者<code>[ condition ](必须有空格)</code>。同样的，如果有多个<code>condition</code>可以使用<code>&amp;&amp; , ||</code>。</p>
<p>举个例子</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat tmp.txt</span><br><span class="line">var=100</span><br><span class="line">if [ $var -ge 10 ] &amp;&amp; [ $var -le 190 ]</span><br><span class="line">then</span><br><span class="line">    echo &#x27;执行if语句块&#x27;</span><br><span class="line">else</span><br><span class="line">    echo &#x27;执行else语句块&#x27;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ./tmp.txt</span><br><span class="line">执行if语句块</span><br></pre></td></tr></table></div></figure>

<p>再次声明，使用<code>[]</code>要加<strong>空格</strong>。</p>

        <h2 id="比较方式"   >
          <a href="#比较方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#比较方式" class="headerlink" title="比较方式"></a>比较方式</h2>
      <p><strong>数值比较</strong>：<code>n1 -eq n2</code></p>
<div class="table-container"><table>
<thead>
<tr>
<th align="center">符号选项</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-eq</td>
<td align="center">equals(&#x3D;&#x3D;)</td>
</tr>
<tr>
<td align="center">-gt</td>
<td align="center">greater than(&gt;)</td>
</tr>
<tr>
<td align="center">-ge</td>
<td align="center">greater equals(&gt;&#x3D;)</td>
</tr>
<tr>
<td align="center">-lt</td>
<td align="center">less than(&lt;)</td>
</tr>
<tr>
<td align="center">-le</td>
<td align="center">less equals(&lt;&#x3D;)</td>
</tr>
<tr>
<td align="center">-ne</td>
<td align="center">not equals(!&#x3D;)</td>
</tr>
</tbody></table></div>
<p><code>if [ $val -gt 5]</code> ，注意，bash shell只能使用整数。</p>
<p><strong>字符串比较</strong>：</p>
<p>直接使用<code>=,!=,\&gt;,\&lt;</code>(大于小于，必须使用转义，否则就会被认为是重定向)。 在比较测试中，<strong>大写字母&lt;小写字母**，如<code>a&gt;z&gt;A</code>。而<code>sort</code>命令恰好相反，<code>sort</code>使用的是系统本地化语言设置中定义的排序顺序。对于英语，</strong>本地化设置指定在排序顺序中，小写字母出现在大写字母前**。</p>
<p> <code>-n</code>和<code>-z</code>可以检查一个变量是否含有数据(未被定义的变量默认长度为0)</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if[ -n $val ]	#如果val长度不为0，就执行then</span><br><span class="line">if[ -z $val ]	#如果val长度为0，就执行then，z--zero</span><br></pre></td></tr></table></div></figure>

<p><strong>文件比较</strong>：</p>
<div class="table-container"><table>
<thead>
<tr>
<th align="center">符号选项</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-d file</td>
<td align="center">检查file是否存在并是一个目录(directory)</td>
</tr>
<tr>
<td align="center">-e file</td>
<td align="center">检查file是否存在(exits)</td>
</tr>
<tr>
<td align="center">-f file</td>
<td align="center">检查file是否存在并是否是一个文件</td>
</tr>
<tr>
<td align="center">-r file</td>
<td align="center">检查file是否存在并是否可读</td>
</tr>
<tr>
<td align="center">-s file</td>
<td align="center">检查file是否存在并是否非空</td>
</tr>
<tr>
<td align="center">-w file</td>
<td align="center">检查file是否存在并是否可写</td>
</tr>
<tr>
<td align="center">-x file</td>
<td align="center">检查file是否存在并是否可执行</td>
</tr>
<tr>
<td align="center">-G file</td>
<td align="center">检查file是否存在并且默认组与当前用户相同</td>
</tr>
<tr>
<td align="center">-O file</td>
<td align="center">检查file是否存在并是否并属当前用户所有</td>
</tr>
<tr>
<td align="center">file1 -nt file2</td>
<td align="center">检查file1是否比file2新</td>
</tr>
<tr>
<td align="center">file1 -ot file2</td>
<td align="center">检查file1是否比file2旧</td>
</tr>
</tbody></table></div>

        <h3 id="case语句"   >
          <a href="#case语句" class="heading-link"><i class="fas fa-link"></i></a><a href="#case语句" class="headerlink" title="case语句"></a>case语句</h3>
      <figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">case variable in                            </span><br><span class="line">pattern1 | pattern2)    commands1;;        </span><br><span class="line">pattern3)   commands2;;                         </span><br><span class="line">*) defalut commands3;;                      </span><br><span class="line">esac                                       </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">case $USER in</span><br><span class="line">Bob | Mike)</span><br><span class="line">	echo &quot;Number one&quot;;;</span><br><span class="line">Cyan)</span><br><span class="line">     echo &quot;Cyan&quot;;;</span><br><span class="line">*)</span><br><span class="line">	 echo &quot;Have not found&quot;;;</span><br><span class="line">esac                                 </span><br></pre></td></tr></table></div></figure>




        <h2 id="循环语句"   >
          <a href="#循环语句" class="heading-link"><i class="fas fa-link"></i></a><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h2>
      
        <h3 id="for循环"   >
          <a href="#for循环" class="heading-link"><i class="fas fa-link"></i></a><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h3>
      <figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">for var in list         </span><br><span class="line">do</span><br><span class="line">    commands                </span><br><span class="line">done                    </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">例子</span></span><br><span class="line">for test in Alabama Alaska Arizona Arkansas California</span><br><span class="line">do</span><br><span class="line">	echo The state is $test</span><br><span class="line">done</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p><code>$test</code>变量在剩余的<code>shell</code>脚本一直有效并且保持着最后一个变量的值(当然是可以修改的)</p>
</li>
<li><p><code>list</code>中单个元素出现了单引号，空格等，要么在这个单独变量外部直接再使用一对引号，要么直接使用<code>\</code>转义字符</p>
</li>
<li><p><code>list</code>的获取，也可以用<strong>命令的输出+命令替换</strong>：<code>for var in $(cat file)</code>，甚至是<code>/home/cyan/test/*</code>路径。当然，如果变量是文件名，要考虑文件名可能出现空格，那么在使用时就要使用引号：<code>&quot;$file&quot;</code>。</p>
</li>
</ul>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">模拟<span class="built_in">ls</span>指令，打印指定目录下的所有文件（当然这里目录固定为home/cyan）</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果想像<span class="built_in">ls</span> 路径那样传参数，需要用到之后的知识</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat tmp.txt</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">/bin/bash</span></span><br><span class="line">for file_name in /home/cyan/*</span><br><span class="line">do</span><br><span class="line">        echo $file_name</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ./tmp.txt</span><br><span class="line">/home/cyan/Desktop</span><br><span class="line">/home/cyan/Documents</span><br><span class="line">/home/cyan/Downloads</span><br><span class="line">/home/cyan/Files</span><br><span class="line">/home/cyan/Music</span><br><span class="line">/home/cyan/OSIntroduction</span><br><span class="line">/home/cyan/Pictures</span><br><span class="line">/home/cyan/Public</span><br><span class="line">/home/cyan/shtool-2.0.8</span><br><span class="line">/home/cyan/shtool-2.0.8.tar.gz</span><br><span class="line">/home/cyan/snap</span><br><span class="line">/home/cyan/Templates</span><br><span class="line">/home/cyan/Videos</span><br><span class="line">/home/cyan/vmware-tools-distrib</span><br></pre></td></tr></table></div></figure>

<ul>
<li>在<code>list</code>中，各个元素之间的分隔符是由<code>IFS</code>–内部字段分隔符决定的，一般会将<strong>空格，制表符，换行符</strong>作为默认字段分隔符如果想要更改分隔符，就必须在<code>shell</code>脚本<code>for</code>循环前面更改<code>IFS</code>。</li>
</ul>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat data</span><br><span class="line">jack bob cyan mike</span><br><span class="line">mary smith</span><br><span class="line"></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat tmp.txt</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">/bin/bash</span></span><br><span class="line">for name in `cat data`</span><br><span class="line">do</span><br><span class="line">        echo $name</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">得到的结果</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ./tmp.txt</span><br><span class="line">jack</span><br><span class="line">bob</span><br><span class="line">cyan</span><br><span class="line">mike</span><br><span class="line">mary</span><br><span class="line">smith</span><br></pre></td></tr></table></div></figure>

<p>这是因为<code>IFS</code>默认的是空格，制表符，换行符。在遇到第一个空格时，就已经分隔了。如果想要只以换行符为分隔符</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat tmp.txt</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">/bin/bash</span></span><br><span class="line">oldIFS=$IFS</span><br><span class="line">IFS=$&#x27;\n&#x27;</span><br><span class="line"></span><br><span class="line">for file_name in `cat data`</span><br><span class="line">do</span><br><span class="line">        echo $file_name</span><br><span class="line">done</span><br><span class="line">IFS=$oldIFS</span><br><span class="line"></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ./tmp.txt</span><br><span class="line">jack bob cyan mike</span><br><span class="line">mary smith</span><br></pre></td></tr></table></div></figure>

<p>C语言风格的for循环</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for (( i=1;i &lt;= 20;i++ )) # i=$(expr $i+1)  i=$[$i + 1]   i=$(echo &quot;scale=0;$i + 1&quot; | bc)</span><br><span class="line">do</span><br><span class="line">    commands</span><br><span class="line">done</span><br></pre></td></tr></table></div></figure>


        <h3 id="while循环"   >
          <a href="#while循环" class="heading-link"><i class="fas fa-link"></i></a><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h3>
      <figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">while test conitions</span><br><span class="line">do</span><br><span class="line">    commands</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">test</span>的替代物[]需要两边空格，而<span class="built_in">expr</span>的替代物$[]不需要两边空格</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">while</span>命令允许执行多个测试命令，但是只有最后一个测试命令的退出状态码会被用于决定什么时候结束循环</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  比如：<span class="keyword">while</span> [<span class="variable">$var1</span> -ge 0]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">              <span class="built_in">echo</span> <span class="variable">$var1</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  就是一个死循环</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">注意，每个测试命令单独一行</span>                </span><br></pre></td></tr></table></div></figure>


        <h3 id="until命令"   >
          <a href="#until命令" class="heading-link"><i class="fas fa-link"></i></a><a href="#until命令" class="headerlink" title="until命令"></a>until命令</h3>
      <figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">until test commands</span><br><span class="line">do</span><br><span class="line">    commands</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">until语句，只有测试条件的退出码非0，才会执行循环中列出的命令。</span></span><br></pre></td></tr></table></div></figure>

</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/08/01/Shell/%E6%9E%84%E5%BB%BA%E5%9F%BA%E6%9C%AC%E8%84%9A%E6%9C%AC(1)/">构建基本脚本(1)</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-08-01</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-08-01</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#简介" class="headerlink" title="简介"></a>简介</h1>
      <p>之前在<code>shell</code>快速入门中已经讲了如何构建一个脚本，我们回顾一下：</p>
<ul>
<li>第一行要指定shell类型<code>#!/bin/bash</code>。</li>
<li>完成基本的脚本构建后，增加执行权限<code>chmod u+x 文件名(u是属主)</code>。</li>
<li>要取消<code>echo</code>的换行，就要使用<code>-n</code>参数<code>echo -n &quot;abcd&quot;</code>。</li>
<li>使用美元符号<code>$</code>来引用变量，如果想单纯使用这个符号，要加上转义符<code>\$</code>。</li>
<li>在脚本中自行设置变量时，&#x3D;之间不能有空格，不然shell会认为是命令而不是变量<code>var=100</code>。</li>
</ul>
<p>本文会接着介绍其他与脚本编程相关的知识。</p>

        <h1 id="命令替换"   >
          <a href="#命令替换" class="heading-link"><i class="fas fa-link"></i></a><a href="#命令替换" class="headerlink" title="命令替换"></a>命令替换</h1>
      <p><code>shell</code>脚本最有用的特性之一就是可以<strong>从命令输出中提取信息</strong>，请<code>get</code>关键词，<strong>命令输出</strong>和<strong>提取信息</strong>。</p>
<p>该特性有两种实现方式：</p>
<ul>
<li>使用反引号（就是<code>Tab</code>键上面那个）</li>
</ul>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">date</span>命令可以得到当前时间cyan@cyan-virtual-machine:~/Templates$ <span class="built_in">cat</span> new_File</span></span><br><span class="line">214391248</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat new_File</span><br><span class="line">214391248</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ echo `date` &gt; new_File</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat new_File</span><br><span class="line">2022年 08月 01日 星期一 10:42:33 CST</span><br><span class="line">cyan@cyan-virtual-machine:~$ var=`date`</span><br><span class="line">cyan@cyan-virtual-machine:~$ echo $var</span><br><span class="line">2022年 08月 01日 星期一 10:21:55 CST</span><br></pre></td></tr></table></div></figure>

<ul>
<li>使用<code>$()</code>，有些<code>shell</code>不支持这种</li>
</ul>
<p>	</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~$ var=$(date)</span><br><span class="line">cyan@cyan-virtual-machine:~$ echo $var</span><br><span class="line">2022年 08月 01日 星期一 10:23:19 CST</span><br></pre></td></tr></table></div></figure>

<p>命令替换会创建一个子<code>shell</code>来运行对应命令，子<code>shell</code>是由运行脚本的<code>shell</code>创建的一个独立的子<code>shell</code>。因此，该子<code>shell</code>所执行的命令是无法使用脚本中所创建的变量的。在命令行提示符下使用路径.&#x2F;来运行命令，也会创建子<code>shell</code></p>
<p>关于<code>date</code>命令，你如果希望得到自己希望的格式化结果</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~$ date +%y-%m-%d\ %H:%M:%S</span><br><span class="line">22-08-01 10:25:33</span><br></pre></td></tr></table></div></figure>




        <h1 id="重定向"   >
          <a href="#重定向" class="heading-link"><i class="fas fa-link"></i></a><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h1>
      <p>从这里开始，你就算接触流这个东西了，输入流输出流，<strong>重定向就是对流的方向重新定义</strong>（你现在可以这么理解）。</p>

        <h2 id="标准输出重定向"   >
          <a href="#标准输出重定向" class="heading-link"><i class="fas fa-link"></i></a><a href="#标准输出重定向" class="headerlink" title="标准输出重定向"></a>标准输出重定向</h2>
      <p>举一个例子，<code>echo</code>将数据打印到屏幕上（标准输出流），那么我们可以对<code>echo</code>的流的方向重新<strong>指向</strong></p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat new_File</span><br><span class="line">214391248</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat new_File</span><br><span class="line">214391248</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ echo `date` &gt; new_File</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat new_File</span><br><span class="line">2022年 08月 01日 星期一 10:42:33 CST</span><br></pre></td></tr></table></div></figure>

<p>从上面代码可以看到，<code>echo</code>通过<code>&gt;</code>符号，将输出重定向到<code>new_File</code>这个文件里面了。并且<strong>先清空文件原本内容</strong>。</p>
<p><code>command &gt;&gt; outputfile</code>  是追加模式。</p>

        <h2 id="标准输入重定向"   >
          <a href="#标准输入重定向" class="heading-link"><i class="fas fa-link"></i></a><a href="#标准输入重定向" class="headerlink" title="标准输入重定向"></a>标准输入重定向</h2>
      <p>将文件内容重定向到命令：<code>command &lt; inputfile</code></p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">wc</span>命令可以对数据文本进行计数：文本行数  文本字数  文本字节数</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ wc &lt; new_File</span><br><span class="line"> 1  6 43</span><br></pre></td></tr></table></div></figure>

<p>这里有个需要注意的地方就是，<code>&lt;</code>是改变标准输出（屏幕），<code>&gt;</code>是改变标准输入（键盘）。<strong>重定向不是代替参数，而是改变标准输入输出</strong>。</p>
<p>比如以下命令就不行</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &lt; new_File</span><br></pre></td></tr></table></div></figure>

<p><code>echo</code>的使用格式是<code>echo 参数</code>，重定向不能替代参数。</p>
<p><code>wc</code>后面接收的可以是标准输入</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ wc</span><br><span class="line">line1</span><br><span class="line">line2</span><br><span class="line">      2       2      12 # 使用ctrl+d结束命令并统计</span><br></pre></td></tr></table></div></figure>




        <h2 id="内联重定向"   >
          <a href="#内联重定向" class="heading-link"><i class="fas fa-link"></i></a><a href="#内联重定向" class="headerlink" title="内联重定向"></a>内联重定向</h2>
      <blockquote>
<p>可以参考：<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38156104/article/details/110375889" >https://blog.csdn.net/qq_38156104/article/details/110375889</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</blockquote>
<p>替换文件为文本，数据流向命令：<code>command &lt;&lt; 特殊字符</code></p>
<p>数据的开始和结束文本标记要一致。本质就是将开始符和结束符之间的数据传给命令</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ wc &lt;&lt;EOF</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">123</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">4142</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">EOF</span></span><br><span class="line">2 2 9</span><br></pre></td></tr></table></div></figure>




        <h1 id="管道"   >
          <a href="#管道" class="heading-link"><i class="fas fa-link"></i></a><a href="#管道" class="headerlink" title="管道"></a>管道</h1>
      <p>一个命令的<strong>标准输出</strong>作为另一个命令的标准输入</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa &gt; rpm.list</span><br><span class="line">sort &lt; rpm.list</span><br></pre></td></tr></table></div></figure>

<p><code>rpm</code>命令通过<code>RedHat</code>包管理系统(<code>RPM</code>)对系统上安装的软件包进行管理。配合<code>-qa</code>选项使用时，会生成已安装包的列表，尽管不会排序。(虽然我在终端执行上面两个命令没啥反应)</p>
<p>重定向在命令之间数据传输比较繁琐，使用管道 <code>|</code> 解决。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command | command</span><br></pre></td></tr></table></div></figure>

<p>为了更好了解管道，我写了一个<code>c</code>程序，文件为<code>test.c</code>。</p>
<figure class="highlight c"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">timeval</span> <span class="title">start</span>,<span class="title">end</span>;</span></span><br><span class="line">        <span class="type">int</span> fd = open(<span class="string">&quot;./tmp&quot;</span>,O_RDONLY);</span><br><span class="line">        <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="type">char</span> bf[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(i;i &lt; <span class="number">10</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">                gettimeofday(&amp;start,<span class="literal">NULL</span>);</span><br><span class="line">                read(fd,bf,<span class="number">10</span>);</span><br><span class="line">                gettimeofday(&amp;end,<span class="literal">NULL</span>);</span><br><span class="line">                <span class="comment">//printf(&quot;%s&quot;,bf);</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,end.tv_usec - start.tv_usec);</span><br><span class="line">        &#125;</span><br><span class="line">        close(fd);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>在<code>linux</code>中可以用<code>cat</code>查看，如果在后面接上<code>sort</code>命令</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat test.c | sort</span><br></pre></td></tr></table></div></figure>

<p>其输出结果为</p>
<figure class="highlight c"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line">        &#125;</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line">        <span class="type">char</span> bf[<span class="number">10</span>];</span><br><span class="line">        close(fd);</span><br><span class="line">        <span class="keyword">for</span>(i;i &lt; <span class="number">10</span>;i++)</span><br><span class="line">                gettimeofday(&amp;end,<span class="literal">NULL</span>);</span><br><span class="line">                gettimeofday(&amp;start,<span class="literal">NULL</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line">        <span class="type">int</span> fd = open(<span class="string">&quot;./tmp&quot;</span>,O_RDONLY);</span><br><span class="line">        <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">                <span class="title function_">printf</span><span class="params">(<span class="string">&quot;%d&quot;</span>,end.tv_usec - start.tv_usec)</span>;</span><br><span class="line">                <span class="comment">//printf(&quot;%s&quot;,bf);</span></span><br><span class="line">                read(fd,bf,<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">timeval</span> <span class="title">start</span>,<span class="title">end</span>;</span></span><br></pre></td></tr></table></div></figure>

</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/07/31/Shell/Linux%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/">Linux文件权限</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-07-31</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-07-31</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="Linux安全性"   >
          <a href="#Linux安全性" class="heading-link"><i class="fas fa-link"></i></a><a href="#Linux安全性" class="headerlink" title="Linux安全性"></a>Linux安全性</h1>
      <p><code>Linux</code>安全系统核心是用户账户，用户账户通过创建用户时分配的用户<code>ID(UID)</code>来跟踪。<code>/etc/password</code>文件将用户的登录名匹配到对应的<code>UID</code>的值<br><code>root</code>账户是<code>Linux</code>管理员，固定分配给的<code>UID</code>是0。<code>Linux</code>会为各种各样的功能创建不同的用户账户，这些账户不是真正的用户，而是系统账户，是系统上运行各种服务进程访问资源用的特殊账户。所有运行在后台的服务都需要用一个系统用户账户登录到Linux系统上！！<strong>在意识到安全问题之前</strong>，许多服务都用<code>root</code>登陆，如果其中一个服务被攻陷，<code>root</code>权限就会被入侵。</p>
<p><code>/etc/shadow</code>文件，该文件记录各个账户之间密码记录。该文件只有<code>root</code>才有权限操作，所以如果我们不是<code>root</code>用户登录，就需要使用<code>sudo</code>命令。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~$ sudo cat /etc/shadow</span><br><span class="line">[sudo] password for cyan:</span><br><span class="line">root:!:18999:0:99999:7:::</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">其他信息就不展示了</span></span><br></pre></td></tr></table></div></figure>

<p>每一行就是一个用户，分为九个字段，分别是:<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://blog.csdn.net/sherlockmj/article/details/106786520" >参考文章传送门</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> </p>
<ul>
<li>与<code>/etc/passwd</code>文件中对应的登录名。</li>
<li><strong>加密后</strong>的密码，也就是说，你不能直接看到这个密码。</li>
<li>自上次修改密码后过去的天数，上面的<code>root</code>是18999，就是从1970.1.1不断累加得到的时间，可以使用命令 <code>date -d &quot;1970-01-01 18999 days&quot;</code>查看具体时间。</li>
<li>最小修改时间间隔，该字段规定了从第 3 字段（最后一次修改密码的日期）起，<strong>多长时间之内不能修改密码</strong>。如果是 0，则密码可以随时修改；如果是 10，则代表密码修改后 10 <strong>天</strong>之内不能再次修改密码。</li>
<li>密码有效期，默认值为 99999，也就是273年。</li>
<li>密码需要变更前的警告天数，当账户密码有效期快到时，系统会发出警告信息给此账户，提醒用户 “再过 n 天你的密码就要过期了，请尽快重新设置你的密码！”。</li>
<li>密码过期后的宽限天数，过期后，在宽限天数内还是可以登录。</li>
<li>账号失效时间，该字段通常被使用在具有收费服务的系统中。</li>
<li>最后一个，保留，还没有使用。</li>
</ul>

        <h1 id="添加新用户"   >
          <a href="#添加新用户" class="heading-link"><i class="fas fa-link"></i></a><a href="#添加新用户" class="headerlink" title="添加新用户"></a>添加新用户</h1>
      <p>使用<code>useradd</code>命令，可以一次性创建新用户账户及设置用户<code>HOME</code>目录结构。<code>useradd</code>命令使用系统默认值以及命令行参数设置用户账户。</p>
<p>系统默认值被设置在<code>/etc/default/useradd</code>，可以使用<code>useradd -D</code>检查默认值</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~$ useradd -D</span><br><span class="line">GROUP=100		# 新用户被添加到GID=100的公共组</span><br><span class="line">HOME=/home		# 新的home目录位于/home/loginname</span><br><span class="line">INACTIVE=-1		# 密码过期后不会被禁用</span><br><span class="line">EXPIRE=			# 未设置过期日期</span><br><span class="line">SHELL=/bin/sh</span><br><span class="line">SKEL=/etc/skel	# 将/etc/skel目录下内容复制到用户的home下</span><br><span class="line">CREATE_MAIL_SPOOL=no	# 是否为该用户在mail目录下创建一个接受邮件的文件</span><br></pre></td></tr></table></div></figure>

<p>上述的系统默认值是可以更改的，在<code>useradd</code>时，加入参数进行更改</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-b  default_home    # 更改默认的创建用户HOME目录的位置</span><br><span class="line">-e  expirtion_date  # 更改默认的新账户的过期日期</span><br><span class="line">-f  inactive        # 更改默认的新用户从密码过期到账户被禁用的天数</span><br><span class="line">-g  group           # 更改默认的组名称或GID</span><br><span class="line">-s  shell           # 更改默认登录shell</span><br></pre></td></tr></table></div></figure>




        <h1 id="删除用户"   >
          <a href="#删除用户" class="heading-link"><i class="fas fa-link"></i></a><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h1>
      <p><code>userdel</code>命令，默认情况下只会删除<code>/etc/passwd</code>文件中的用户信息，而不会删除系统中属于该账户的任何文件，<code>userdel -r</code>会删除用户的HOME目录以及邮件目录。</p>

        <h1 id="修改用户"   >
          <a href="#修改用户" class="heading-link"><i class="fas fa-link"></i></a><a href="#修改用户" class="headerlink" title="修改用户"></a>修改用户</h1>
      <p><code>usermod,chsh,chfn,chage</code>这几个指令要用到再自己百度，平时用不到，隔不了多久就会忘记。</p>

        <h1 id="Linux组"   >
          <a href="#Linux组" class="heading-link"><i class="fas fa-link"></i></a><a href="#Linux组" class="headerlink" title="Linux组"></a>Linux组</h1>
      <p>linux通过将具有相同特性的用户划归为一个组，可以大大简化用户的管理，方便用户之间文件的共享。任何一个用户都至少属于一个组，这个组称为初始组，可以同时属于多个附加组。用户不仅拥有初始组的权限，还拥有附加组的权限。</p>
<p>在<code>/etc/group</code>文件中，包含系统上用到的每个组的信息，4个字段：<strong>组名:组密码:GID:属于该组的用户列表</strong></p>
<p>用户列表中某些组没有列出用户，并不代表没有成员，只是加入了成员，不会出现在该文件中。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建组</span></span><br><span class="line">groupadd 组名</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">后期将成员加入到指定组</span></span><br><span class="line">usermod -G 组名 成员名</span><br></pre></td></tr></table></div></figure>




        <h1 id="文件权限"   >
          <a href="#文件权限" class="heading-link"><i class="fas fa-link"></i></a><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h1>
      <p>在本系列第一篇文章中，为了运行一个新建脚本，需要使用<code>chmod u+x 文件名</code>。查看一个文件，我们可以使用<code>ll</code></p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ ll</span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x  2 cyan cyan 4096 7月  30 19:09 ./</span><br><span class="line">drwxr-xr-x 21 cyan cyan 4096 7月  30 19:09 ../</span><br><span class="line">-rw-rw-r--  1 cyan cyan    0 7月  28 15:50 new_File</span><br><span class="line">-rwxrw-r--  1 cyan cyan   49 7月  30 19:09 test*</span><br><span class="line">-rwxrw-r--  1 cyan cyan   31 7月  29 16:18 test_1.sh*</span><br></pre></td></tr></table></div></figure>

<p>得到的结果中，第一位有些是<code>d</code>，有些是<code>-</code>。第一个代表了文件(-)&#x2F;目录(d)&#x2F;链接(l)&#x2F;字符型设备(c)&#x2F;块设备(b)&#x2F;网络设备(n)。</p>
<p>后面一共是9位，每3位为一个部分（分别表示rwx），这<strong>三个部分</strong>依次属于<strong>文件属主（创建文件的用户）</strong>，<strong>属组成员</strong>，<strong>其他用户</strong>权限。</p>
<p>目录或者文件一开始创建时，会授予默认权限，默认权限与<code>umask</code>值有关。三个用户权限（<strong>三个部分</strong>）各自占用一个八进制位（0-7），一个部分的权限从<code>&#39;---&#39;</code>到<code>&#39;rwx&#39;</code>在八进制位中表示为<code>0-7</code>，如<code>rw-</code>就是6。三个部分合在一个，就是<code>000-777</code>，也就是<code>---------到rwxrwxrwx</code>。</p>
<p><code>umask</code>命令用于<strong>设置</strong>创建文件或是目录的<strong>默认权限</strong>，我们先在终端输入<code>umask</code>命令</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ umask</span><br><span class="line">0002</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">你的终端可能会输出0022，我好像是在环境文件做过持久化更改（有点记不清了）</span></span><br></pre></td></tr></table></div></figure>

<p>第一位是一个关于特殊权限的位，可以暂时不管。后面三个与默认权限有关。</p>
<p>对于文件而言，默认的最大权限就是<code>666</code>，也就是<code>rw-rw-rw-</code>，目录的默认最大权限是<code>777</code>。如果你学过计算机网络，你会知道<strong>掩码</strong>这个东西。这里就是，最大默认权限<strong>减去</strong>掩码就会得到文件（目录）创建时赋予的权限。</p>
<p>比如我的掩码<code>umask=0002</code>，那么创建文件时，<code>666-002=664</code>，得到的权限就是<code>rw-rw-r--</code></p>
<p>验证一下</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ touch tmp.txt</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ll tmp.txt</span><br><span class="line">-rw-rw-r-- 1 cyan cyan 0 7月  31 21:30 tmp.txt</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ umask</span><br><span class="line">0002</span><br></pre></td></tr></table></div></figure>

<p>这里有一篇<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://blog.51cto.com/u_15127673/2803517" >文章</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>参考。</p>

        <h1 id="更改权限"   >
          <a href="#更改权限" class="heading-link"><i class="fas fa-link"></i></a><a href="#更改权限" class="headerlink" title="更改权限"></a>更改权限</h1>
      <p>通过<code>chmod</code>命令，可以修改文件的权限</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">chmod</span> 3位八进制权限码 文件名</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ chmod 777 tmp.txt</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ll tmp.txt</span><br><span class="line">-rwxrwxrwx 1 cyan cyan 0 7月  31 21:30 tmp.txt*</span><br></pre></td></tr></table></div></figure>

<p>如果你只是想改变某一部分（属主，组内用户，其他用户）的权限，可以使用</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">chmod u+x 文件名 # 属主增加执行权限</span><br><span class="line">chmod g-rx 文件名 # 组内用户减少</span><br><span class="line">chmod o=rwx 文件名 # 其他用户的权限为rwx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">举例</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ chmod g-rx tmp.txt</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ll tmp.txt</span><br><span class="line">-rwx-w-rwx 1 cyan cyan 0 7月  31 21:30 tmp.txt*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">说明</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">u:表示用户(属主)  g:表示组  o:表示其他  a:表示所有</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">+:增加  -:减少  =:赋值</span></span><br></pre></td></tr></table></div></figure>

</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/07/31/Database/MySQL/B-%E6%A0%91%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BD%BF%E7%94%A8/">B+树索引的使用</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-07-31</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-07-31</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#简介" class="headerlink" title="简介"></a>简介</h1>
      <p>本文主要讲解索引的具体工作原理以及代价，如何正确的建立索引才能使查询变快。在阅读本文前，请一定保证对之前更新的内容（B+树索引）理解明白。</p>
<p>现在我们先创建一个表，之后方便举例</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">create table single_table (</span><br><span class="line">    id int not null auto_increment</span><br><span class="line">    key1 varchar(100),</span><br><span class="line">    key2 int</span><br><span class="line">    key3 varchar(100),</span><br><span class="line">    key_part1 varchar(100),</span><br><span class="line">    key_part2 varchar(100),</span><br><span class="line">    key_part3 varchar(100),</span><br><span class="line">    common_field varchar(100),</span><br><span class="line">    primary key(id),</span><br><span class="line">    key idx_key1(key1),</span><br><span class="line">    unique key uk_key2(key2),</span><br><span class="line">    key idx_key3(key3),</span><br><span class="line">    key idx_key_part(key_part1,key_part2,key_part3)</span><br><span class="line">) engine=InnoDB character set=utf8; </span><br></pre></td></tr></table></div></figure>




        <h1 id="简化B-树示意图"   >
          <a href="#简化B-树示意图" class="heading-link"><i class="fas fa-link"></i></a><a href="#简化B-树示意图" class="headerlink" title="简化B+树示意图"></a>简化B+树示意图</h1>
      <p>我们知道，B+树的非叶子节点是目录项，它是为了定位下一层节点，直到在叶子节点找到对应的记录。其查询算法的本质还是在每个页中使用<strong>二分查找</strong>找到下一层对应的页。那么我们不如将B+树直接简化，只剩下叶子节点。</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/07/30/Shell/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3shell/">深入理解shell</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-07-30</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-07-30</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#简介" class="headerlink" title="简介"></a>简介</h1>
      <p>以下是维基百科对<code>shell</code>的定义</p>
<blockquote>
<p>普通意义上的shell就是可以接受用户输入命令的程序，Unix操作系统下的shell既是用户交互的界面，也是控制系统的脚本语言。</p>
</blockquote>
<p>所以我们可以理解，当你打开终端时，其实就是启动了一个<code>shell</code>，<code>shell</code>有很多种，如<code>bash,zsh,csh</code>等。</p>
<p>在<code>/etc/passwd</code>中列出了当前用户默认的<code>shell</code>：</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:/etc$ cat passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">...</span><br><span class="line">cyan:x:1000:1000:cyan,,,:/home/cyan:/bin/bash</span><br><span class="line">...</span><br><span class="line">mysql:x:127:133:MySQL Server,,,:/nonexistent:/bin/false</span><br></pre></td></tr></table></div></figure>

<p>我们只看部分，可以看到使用的是<code>bash shell</code>。</p>

        <h1 id="父子shell"   >
          <a href="#父子shell" class="heading-link"><i class="fas fa-link"></i></a><a href="#父子shell" class="headerlink" title="父子shell"></a>父子shell</h1>
      <p>系统一开始启动的<code>shell</code>是父<code>shell</code>，在此基础上启动其他<code>shell</code>或是使用命令<code>/bin/bash</code>，被称为子<code>shell</code>。当前进程下的<code>shell</code>，在生成子<code>shell</code>进程时，父进程的部分环境被复制到子<code>shell</code>中。</p>
<p>结合<code>ps -f / ps --forest</code> 命令我们可以查看当前<code>shell</code>的关系</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">首先进入终端，然后使用bash开启一个新的shell</span></span><br><span class="line">cyan@cyan-virtual-machine:/$ bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用ps -f查看当前shell，在18:42打开终端（父shell，PID=67792），在18:49调用bash，进入子</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">shell(PID=69555,PPID=67792,PPID--Parent PID)</span></span><br><span class="line">cyan@cyan-virtual-machine:/$ ps -f</span><br><span class="line">UID          PID    PPID  C STIME TTY          TIME CMD</span><br><span class="line">cyan       67792   67791  0 18:42 pts/1    00:00:00 -bash</span><br><span class="line">cyan       69555   67792  0 18:49 pts/1    00:00:00 bash</span><br><span class="line">cyan       69562   69555  0 18:49 pts/1    00:00:00 ps -f</span><br></pre></td></tr></table></div></figure>

<p>这么看不是很形象，可以使用<code>--forest</code>选项</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:/$ ps --forest</span><br><span class="line">    PID TTY          TIME CMD</span><br><span class="line">  67792 pts/1    00:00:00 bash</span><br><span class="line">  69555 pts/1    00:00:00  \_ bash</span><br><span class="line">  69564 pts/1    00:00:00      \_ ps</span><br></pre></td></tr></table></div></figure>

<p>这里很明显<code>PID=69555</code>的<code>bash</code>是<code>PID=67792</code>的<code>bash</code>的子<code>shell</code>。可是更下面为什么还有个<code>ps</code>，这是后话。</p>

        <h1 id="进程列表"   >
          <a href="#进程列表" class="heading-link"><i class="fas fa-link"></i></a><a href="#进程列表" class="headerlink" title="进程列表"></a>进程列表</h1>
      <p>如果你想一次性执行一系列命令，而不是执行一个输入一个，就可以在命令之间使用分号</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:/$ pwd;ls;cd /etc;pwd;</span><br><span class="line">/ #第一个pwd指令结果</span><br><span class="line">bin   cdrom  etc   lib    lib64   lost+found  mnt  proc  run   snap  swapfile  tmp  var</span><br><span class="line">boot  dev    home  lib32  libx32  media       opt  root  sbin  srv   sys       usr</span><br><span class="line">/etc # 第二个pwd指令结果</span><br></pre></td></tr></table></div></figure>

<p>还有一种方式就是使用<strong>进程列表</strong>，需要将这些命令加入括号中，<code>(pwd;ls;cd /etc;pwd;ps -f)</code>。这样会<strong>创建一个子shell来执行对应命令</strong>，其实进程列表是一种命令分组。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ ls;ps --forest;</span><br><span class="line">new_File  test  test_1.sh</span><br><span class="line">    PID TTY          TIME CMD</span><br><span class="line">  67792 pts/1    00:00:00 bash</span><br><span class="line">  69654 pts/1    00:00:00  \_ ps</span><br><span class="line">  </span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ (ls;ps --forest)</span><br><span class="line">new_File  test  test_1.sh</span><br><span class="line">    PID TTY          TIME CMD</span><br><span class="line">  67792 pts/1    00:00:00 bash</span><br><span class="line">  69641 pts/1    00:00:00  \_ bash</span><br><span class="line">  69643 pts/1    00:00:00      \_ ps</span><br></pre></td></tr></table></div></figure>

<p>很明显，<code>（ls;ps --forest)</code>是在子<code>shell</code>中运行的。</p>
<p>其实，也可以通过查看环境变量<code>BASH_SUBSHELL</code>查看子shell是否创建，该环境变量返回子shell的个数。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ (echo $BASH_SUBSHELL)</span><br><span class="line">1</span><br></pre></td></tr></table></div></figure>

<p>另一种进程分组：<code>&#123; pwd;ls;cd ~; &#125;</code>花括号+末尾分号，但是<strong>不会创建子shell</strong>,需要注意的是，<strong>花括号与命令和分号之间存在空格</strong>。</p>
<blockquote>
<p>退出一个<code>shell</code>需要使用<code>exit</code>，要是使用<code>exit</code>时出现：<code>logout There are stopped jobs.</code>，说明这个子<code>shell</code>中还存在<code>stopped</code>的进程，可以通过<code>kill -9 pid</code>强制杀死进程。</p>
</blockquote>
<p>为了使读者对这个问题有更好的认识，现在编写以下脚本</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">脚本文件名<span class="built_in">test</span></span></span><br><span class="line"></span><br><span class="line">val=10</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">很明显，这是一个死循环</span></span><br><span class="line">while val=10</span><br><span class="line">do</span><br><span class="line">        val=10</span><br><span class="line">done</span><br></pre></td></tr></table></div></figure>

<p>然后进入子<code>shell</code>执行该脚本，你会看到脚本在不断循环而不会结束，此时使用<code>ctrl+z</code>挂起这个线程</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ bash</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ./test</span><br><span class="line">^Z</span><br><span class="line">[1]+  Stopped                 ./test</span><br></pre></td></tr></table></div></figure>

<p>现在你就退不出子<code>shell</code>了，试试<code>exit</code>语句</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ exit</span><br><span class="line">exit</span><br><span class="line">There are stopped jobs.</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ps</span><br><span class="line">    PID TTY          TIME CMD</span><br><span class="line">  67792 pts/1    00:00:00 bash</span><br><span class="line">  69675 pts/1    00:00:00 bash</span><br><span class="line">  69681 pts/1    00:00:01 test</span><br><span class="line">  69683 pts/1    00:00:00 ps</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ exit</span><br><span class="line">exit</span><br><span class="line">There are stopped jobs.</span><br></pre></td></tr></table></div></figure>

<p>很明显，<code>exit</code>没有让你退出子<code>shell</code>，我们看到<code>test</code>进程的<code>PID</code>为69681</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ kill -9 69681</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ps</span><br><span class="line">    PID TTY          TIME CMD</span><br><span class="line">  67792 pts/1    00:00:00 bash</span><br><span class="line">  69675 pts/1    00:00:00 bash</span><br><span class="line">  69689 pts/1    00:00:00 ps</span><br><span class="line">[1]+  Killed                  ./test</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ exit</span><br><span class="line">exit</span><br></pre></td></tr></table></div></figure>

<p>哦~有没有觉得自己一下子学了很多东西。</p>

        <h1 id="后台模式"   >
          <a href="#后台模式" class="heading-link"><i class="fas fa-link"></i></a><a href="#后台模式" class="headerlink" title="后台模式"></a>后台模式</h1>
      <p>在命令后使用<code>&amp;</code>,将其置入后台模式，并且可以用<code>ps / jobs</code> 来显示后台作业信息。<code>jobs</code>命令可以显示出当前运行在后台模式中的所有用户的进程。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ sleep 1000 &amp;</span><br><span class="line">[1] 69698</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ jobs -l</span><br><span class="line">[1]+ 69698 Running                 sleep 1000 &amp;</span><br></pre></td></tr></table></div></figure>

<p>1是作业号，<code>shell</code>中运行的每个进程被称为作业。后显示作业状态以及命令，-l显示命令PID。使用&amp;将命令置入后台不会创建子<code>shell</code>。</p>
<p>你应该知道为什么要将命令执行置入后台，假设你有一个一直在循环的脚本，如果这个脚本不执行完，那你就不能输入其他命令。</p>

        <h2 id="协程"   >
          <a href="#协程" class="heading-link"><i class="fas fa-link"></i></a><a href="#协程" class="headerlink" title="协程"></a>协程</h2>
      <p>会后台生成子<code>shell</code>，子<code>shell</code>执行指令</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ coproc sleep 10</span><br><span class="line">[1] 69704</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ps --forest</span><br><span class="line">    PID TTY          TIME CMD</span><br><span class="line">  67792 pts/1    00:00:00 bash</span><br><span class="line">  69706 pts/1    00:00:00  \_ ps</span><br><span class="line">[1]+  Done                    coproc COPROC sleep 10</span><br></pre></td></tr></table></div></figure>

<p>当然也可以和进程列表一起使用，还可以命名</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">coproc My_Job (ls;sleep 10)</span><br></pre></td></tr></table></div></figure>

<p>My_Job是进程的名字，默认是COPROC。协程coproc与进程列表一起使用，会产生嵌套子shell。<strong>需要牢记的是，生成子shell的成本不低</strong>。</p>

        <h1 id="内建命令"   >
          <a href="#内建命令" class="heading-link"><i class="fas fa-link"></i></a><a href="#内建命令" class="headerlink" title="内建命令"></a>内建命令</h1>
      <p>现在不想更这个，鸽一下</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/07/29/Shell/Linux%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/">Linux环境变量</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-07-29</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-07-29</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="前言"   >
          <a href="#前言" class="heading-link"><i class="fas fa-link"></i></a><a href="#前言" class="headerlink" title="前言"></a>前言</h1>
      <p>在了解<code>Linux</code>的环境变量前，我们先了解一下变量。</p>
<p>在脚本中使用以下代码</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat test</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">val=10</span><br><span class="line">while echo val</span><br><span class="line">do</span><br><span class="line">        echo &quot; testing... &quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">会循环打印：</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">val</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">testing...</span></span><br></pre></td></tr></table></div></figure>

<p>在脚本中我们直接定义一个变量，该怎么用呢？直接在终端定义变量，此时变量是什么？</p>

        <h1 id="环境变量"   >
          <a href="#环境变量" class="heading-link"><i class="fas fa-link"></i></a><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h1>
      <p>划分为局部和全局变量，局部变量只对创建他们的shell可见，<strong>系统环境变量基本都是大写字母</strong>，区别于普通用户的环境变量，查看全局变量可以使用命令<code>env </code>或者<code>printenv</code>。</p>
<p>查看单个变量的值：<code>printenv $HOME</code>或者<code>echo $HOME</code>。这里给出几个常见的系统环境变量</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ echo $HOME</span><br><span class="line">/home/cyan</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ echo $PATH</span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ echo $SHELL</span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></div></figure>

<p>你可以把变量前面的美元符号<code>$</code>看作取值，在变量前加上<code>$</code>可以区分它到底是变量还是字符串。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ echo $SHELL</span><br><span class="line">/bin/bash</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ echo SHELL</span><br><span class="line">SHELL</span><br></pre></td></tr></table></div></figure>

<p>我们要定义自己的变量，直接定义即可</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">通过<span class="built_in">cat</span>命令查看<span class="built_in">test</span>文件内容</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat test</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">val=10</span><br><span class="line">echo val</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">自定义变量value</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ value=./test</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">尝试使用value来运行./test</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ value</span><br><span class="line">value: command not found</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">尝试使用value的值来运行./test，但是打印出来的不是10，而是val</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ $value</span><br><span class="line">val</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">可见，在脚本中，变量前也需要使用$</span></span><br></pre></td></tr></table></div></figure>

<p>看到这里你应该对变量有了大概的了解。<code>$</code>相当于取出变量的值，想要定义一个变量，直接定义即可。但是这里有个<strong>致命的坑</strong>，我们平时写代码，为了有较高的可读性，一般在变量和<code>=</code>以及值之间都会加上<strong>空格</strong>，但是这在终端里面是致命的错误</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ val = 10</span><br><span class="line"></span><br><span class="line">Command &#x27;val&#x27; not found, did you mean:</span><br><span class="line"></span><br><span class="line">  command &#x27;pal&#x27; from deb pal (0.4.3-8.1build4)</span><br><span class="line">  command &#x27;cal&#x27; from deb bsdmainutils (11.1.2ubuntu3)</span><br><span class="line">  command &#x27;vala&#x27; from deb valac-bin (0.48.6-0ubuntu1)</span><br><span class="line">  command &#x27;fal&#x27; from deb dnet-progs (2.65build2)</span><br><span class="line">  command &#x27;vax&#x27; from deb simh (3.8.1-6)</span><br><span class="line">  command &#x27;al&#x27; from deb mono-devel (6.8.0.105+dfsg-2)</span><br><span class="line">  command &#x27;vam&#x27; from deb vim-addon-manager (0.5.10)</span><br><span class="line">  command &#x27;pval&#x27; from deb snacc (1.3.1-7build2)</span><br><span class="line">  command &#x27;vl&#x27; from deb atfs (1.4pl6-14)</span><br><span class="line"></span><br><span class="line">Try: sudo apt install &lt;deb name&gt;</span><br></pre></td></tr></table></div></figure>

<p>因为加上空格，<code>shell</code>（我的是<code>bash</code>）就会认为，你的<code>val</code>（变量名）是一个命令，空格后面的是该命令的参数。而<code>shell</code>没有找到<code>val</code>这个命令就会报错。</p>
<p>其实随着之后的学习，你会越来越理解<code>Linux</code>中各种设计的巧妙，我们调用的一个又一个命令（大部分），说穿了其实是一个又一个可执行文件，如果你之前在给<code>IDEA</code>，<code>VsCode</code>这些工具配置环境变量时好好了解过到底为什么需要环境变量，那么你很清楚我刚才在说什么。</p>
<p>对于局部环境变量，bash并没有什么指令可以单独显示，<code>set</code>命令会显示为某个特定进程设置的所有环境变量，输出时会按照字母顺序排序</p>

        <h2 id="设置用户定义变量"   >
          <a href="#设置用户定义变量" class="heading-link"><i class="fas fa-link"></i></a><a href="#设置用户定义变量" class="headerlink" title="设置用户定义变量"></a>设置用户定义变量</h2>
      <p>上面已经讲得差不多了，这里再给出几个需要注意的点</p>
<ul>
<li>如果变量的值中含有空格，请使用用单（双）引号，<code>val = &quot;hello world&quot;</code>。</li>
<li>定义用户变量，请坚持使用<strong>小写</strong>字母。</li>
<li>变量名，等号，值之间不能有空格。</li>
</ul>

        <h2 id="设置全局环境变量"   >
          <a href="#设置全局环境变量" class="heading-link"><i class="fas fa-link"></i></a><a href="#设置全局环境变量" class="headerlink" title="设置全局环境变量"></a>设置全局环境变量</h2>
      <p>我们之前直接创建的变量是局部变量，对其他<code>shell</code>（父子<code>shell</code>）是不可见得。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ var=10</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ bash</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ echo $var</span><br><span class="line"></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ exit</span><br><span class="line">exit</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ echo $var</span><br><span class="line">10</span><br></pre></td></tr></table></div></figure>

<p>关于父子<code>shell</code>，我不会在这篇文章过多讲解，你要是求知心切，<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://baidu.com/" >传送门</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>。</p>
<p>你现在可以这么理解，<code>bash shell</code>也是一个程序，我们打开终端时，<code>bash</code>也启动了，既然<code>bash</code>是程序，那我们在终端也可以运行<code>bash</code>，这样我们就处于<strong>子shell</strong>，<strong>父子shell</strong>使用不同的内存空间，所以在<strong>父shell</strong>创建的局部变量对<strong>子shell</strong>是不可见的。</p>
<p>创建全局环境变量的方法：先创建局部环境变量，再导出到全局变量</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var=&#x27;global&#x27;</span><br><span class="line">export &#x27;global&#x27; #export就是导出命令，也可以直接导出：export var=global</span><br></pre></td></tr></table></div></figure>

<p>在<strong>子shell</strong>中修改全局变量不会影响<strong>父shell</strong>中该变量的值。根据该性质，在<strong>子shell</strong>中设置全局变量是没有意义的，因为其设置的值，根本不传给父shell。</p>

        <h2 id="删除环境变量"   >
          <a href="#删除环境变量" class="heading-link"><i class="fas fa-link"></i></a><a href="#删除环境变量" class="headerlink" title="删除环境变量"></a>删除环境变量</h2>
      <figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unset var</span><br></pre></td></tr></table></div></figure>

<p>解释：</p>
<ul>
<li>使用<code>unset</code>指令，可以直接删除变量，不需要加$。$的本质是，得到环境变量的值！</li>
<li><code>printenv</code>指定了，传入的参数就是一个环境变量（自定义变量不行），可以直接使用。</li>
<li>在子shell中对全局变量的修改无能反映到父shell，哪怕是删除</li>
</ul>

        <h2 id="设置PATH环境变量"   >
          <a href="#设置PATH环境变量" class="heading-link"><i class="fas fa-link"></i></a><a href="#设置PATH环境变量" class="headerlink" title="设置PATH环境变量"></a>设置PATH环境变量</h2>
      <p><code>PATH</code>环境变量定义了用于进行命令和程序查找的目录。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~$ echo $PATH</span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin</span><br></pre></td></tr></table></div></figure>

<ul>
<li>如果命令或程序位置没有包含在<code>PATH</code>中，如果不使用路径，<code>shell</code>是没法找到并运行的。就像上一篇文章，我们必须使用<code>./test.sh</code>才能运行该文件，使用<code>test.sh</code>是不行的。</li>
<li>短暂的修改<code>PATH</code>命令就是：<code>PATH=$PATH:.</code>，一般加<code>.</code>就是包含当前目录，当然也可以加其他路径。这种修改，在<code>exit</code>后会失效。</li>
</ul>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看当前文件夹下文件</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ls</span><br><span class="line">new_File  test  test_1.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看文件test_1.sh脚本内容--打印Hello World</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat test_1.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">echo &quot;Hello World&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">希望直接使用这个脚本名作为命令</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ test_1.sh</span><br><span class="line">test_1.sh: command not found</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将当前目录加到PATH中</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ PATH=$PATH:.</span><br><span class="line"></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ test_1.sh</span><br><span class="line">Hello World</span><br></pre></td></tr></table></div></figure>

<p>如果你还没明白，可以参考以下这个（我觉得和我讲的差不多）<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://www.manongjc.com/detail/24-braxhrzgczfkpwt.html" >如何理解PATH</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>。如果还是不懂，真拿你没办法，就再给个 <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://baidu.com/" >真正的传送门</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>。</p>

        <h1 id="最后"   >
          <a href="#最后" class="heading-link"><i class="fas fa-link"></i></a><a href="#最后" class="headerlink" title="最后"></a>最后</h1>
      <p>关于如何持久化创建一个环境变量，这涉及到修改一些系统文件，文件权限以及<code>shell</code>进程的一些知识，之后再说吧。</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/07/29/Tools/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/">Hexo搭建博客指南</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-07-29</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-08-03</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="前言"   >
          <a href="#前言" class="heading-link"><i class="fas fa-link"></i></a><a href="#前言" class="headerlink" title="前言"></a>前言</h1>
      <p>使用Hexo+Github搭建博客，因为涉及到部分插件或者安装包的下载，<del>建议使用魔法上网</del>。</p>
<blockquote>
<p>推荐文章：<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26625249" >https://zhuanlan.zhihu.com/p/26625249</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>推荐视频：<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1mU4y1j72n?spm_id_from=333.337.search-card.all.click&amp;vd_source=5acf5a7b23d28e7633e5a9b381c57c42" >https://www.bilibili.com/video/BV1mU4y1j72n?spm_id_from=333.337.search-card.all.click&amp;vd_source=5acf5a7b23d28e7633e5a9b381c57c42</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</blockquote>

        <h1 id="准备工作"   >
          <a href="#准备工作" class="heading-link"><i class="fas fa-link"></i></a><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1>
      
        <h2 id="下载Node-js"   >
          <a href="#下载Node-js" class="heading-link"><i class="fas fa-link"></i></a><a href="#下载Node-js" class="headerlink" title="下载Node.js"></a>下载Node.js</h2>
      <p>简单的说 Node.js 就是运行在服务端的 JavaScript。Node.js 是一个基于 <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://developers.google.com/v8/" >Chrome V8</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> 引擎的 <strong>JavaScript 运行环境</strong>。Node.js 使用了一个事件驱动、非阻塞式 I&#x2F;O 的模型，使其轻量又高效。Node.js 的包管理器 <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.npmjs.com/" >npm</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>，是全球最大的开源库生态系统。</p>
<p>官网下载:<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://nodejs.org/en/download/" >https://nodejs.org/en/download/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>安装完成后，可以通过命令行查看：<code>node -v</code>显示安装版本，<code>npm -v</code>显示npm版本。新版的Node.js已自带npm，安装Node.js时会一起安装，<strong>npm的作用就是对Node.js依赖的包进行管理，也可以理解为用来安装&#x2F;卸载Node.js需要的东西。</strong> </p>

        <h3 id="环境配置"   >
          <a href="#环境配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h3>
      <p>npm在安装node.js需要的依赖时，会默认放在C盘<code>C:|Users|用户名\AppData\Roaming\npm</code>，所以此处我们需要手动设置npm安装的全局模块所在的路径，以及缓存cache得路径。</p>
<p>在nodejs文件夹下创建node_cache,node_global即可。</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/29/90aec5c64426e20a.png" alt="image-20220729144241266"></p>
<p>拿到相应的路径，在终端执行以下命令：</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config set prefix &quot;S:\DevTools\Nodejs\node_global&quot;</span><br><span class="line">npm config set cache &quot;S:\DevTools\Nodejs\node_cache&quot;</span><br></pre></td></tr></table></div></figure>

<p>然后再配置环境变量，先配置系统变量</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/29/b18f9f922882f863.png" alt="image-20220729144419380"></p>
<p>然后再配置用户变量中的path，之前的值为： <code>C:\Users\Cyan\AppData\Roaming\npm</code>，将其改为下面的值</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/29/71d161b1f67a1e9f.png" alt="image-20220729144448110"></p>

        <h2 id="下载Git"   >
          <a href="#下载Git" class="heading-link"><i class="fas fa-link"></i></a><a href="#下载Git" class="headerlink" title="下载Git"></a>下载Git</h2>
      <p>不多说</p>

        <h2 id="下载Hexo"   >
          <a href="#下载Hexo" class="heading-link"><i class="fas fa-link"></i></a><a href="#下载Hexo" class="headerlink" title="下载Hexo"></a>下载Hexo</h2>
      <p>在终端执行命令</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli --location=global</span><br></pre></td></tr></table></div></figure>

<p>如果下载失败，错误信息显示权限不足，那么请使用管理员身份运行cmd。</p>
<p>下载完成后，使用<code>hexo -v</code>查看hexo 版本</p>

        <h2 id="Github相关操作"   >
          <a href="#Github相关操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#Github相关操作" class="headerlink" title="Github相关操作"></a>Github相关操作</h2>
      <p>下面操作以我的Github为例进行讲解。</p>

        <h3 id="建立仓库"   >
          <a href="#建立仓库" class="heading-link"><i class="fas fa-link"></i></a><a href="#建立仓库" class="headerlink" title="建立仓库"></a>建立仓库</h3>
      <p>我的Github的昵称是<code>Cyan-N</code>，所以要建立一个仓库叫做：<code>Cyan-N.github.io</code>。<strong>后缀名统一，前面必须是账号的昵称</strong>。</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/29/87a0634c1fc7f4b2.png" alt="image-20220729144929165"></p>

        <h3 id="生成ssh密钥"   >
          <a href="#生成ssh密钥" class="heading-link"><i class="fas fa-link"></i></a><a href="#生成ssh密钥" class="headerlink" title="生成ssh密钥"></a>生成ssh密钥</h3>
      <p>随便进入文件夹，然后右键进入 <code>Git Bash Here</code>，调用命令：<code>ssh-keygen -t rsa -C &quot;邮箱&quot;</code>，<strong>此时不要关闭Git</strong>。然后就会在 <code>C:\Users\Cyan\.ssh</code>里面生成<code>id_rsa</code>和<code>id_rsa.pub</code>文件，记事本进入<code>id_rsa.pub</code>，<code>ctrl+a，ctrl+c</code>复制全部指令。</p>
<p>在<code>Github</code>中，进入<code>setting-&gt;SSH and GPG keys</code>创建<code>SSH Key</code>，<code>title</code>随便取，然后在<code>key</code>中粘贴刚才复制的内容。然后在刚才的Git界面输入以下命令：<code>ssh -T git@github.com</code>。测试ssh是否绑定成功。</p>
<p>再次强调，<code>Github</code>是国外网站，会抽风。</p>

        <h1 id="使用Hexo"   >
          <a href="#使用Hexo" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用Hexo" class="headerlink" title="使用Hexo"></a>使用Hexo</h1>
      
        <h2 id="生成本地网页"   >
          <a href="#生成本地网页" class="heading-link"><i class="fas fa-link"></i></a><a href="#生成本地网页" class="headerlink" title="生成本地网页"></a>生成本地网页</h2>
      <p>找一个文件夹，用于存放你的博客文件，此处我命名为Blog。然后在这个界面中 <code>Git Bash Here</code>。其实建议以管理员身份运行<code>Git</code>。然后输入命令：<code>hexo init</code>用于初始化。</p>
<p><code>hexo s</code>用于启动服务，此时会弹出一个网址，就可以通过浏览器来查看，<code>ctrl+c</code>关闭本地服务器，就不能再访问了。</p>

        <h2 id="修改配置"   >
          <a href="#修改配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h2>
      <p>在存放博客文件的文件夹，找到_config.yml文件，在最后面修改为下面代码：</p>
<figure class="highlight yaml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">https://github.com/Cyan-N/Cyan-N.github.io.git</span> <span class="comment">#此处就是仓库地址</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></div></figure>




        <h2 id="下载工具"   >
          <a href="#下载工具" class="heading-link"><i class="fas fa-link"></i></a><a href="#下载工具" class="headerlink" title="下载工具"></a>下载工具</h2>
      <p>在存放博客文件的文件夹，进入Git，这里还是建议管理员身份。执行命令：<code>npm install hexo-deployer-git --save</code>安装Git部署插件。</p>
<p>然后执行：<code>hexo g</code>生成网页文件，再执行：<code>hexo d</code>提交到Github上，这一步可能会连接超时，多试几次。</p>

        <h1 id="结尾"   >
          <a href="#结尾" class="heading-link"><i class="fas fa-link"></i></a><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1>
      <p>现在你已经完成了博客的搭建，你可以通过访问你的仓库地址，就是<strong>修改配置</strong>里面的那个网址来访问你的博客。其实还有一些我没有讲，比如域名替换和https使用，更换主题，通过修改主题中的_config.yml实现个性化博客。</p>
<p>还神起爪子啊，个人赶门去搜一哈（翻译：还愣着干什么，自己马上去搜一下）</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/07/28/Shell/shell%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/">shell快速入门</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-07-28</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-07-28</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#简介" class="headerlink" title="简介"></a>简介</h1>
      <p>本文及后续文章都是基于<code>bash shell</code>讲解，<code>Linux</code>发行版本为<code>Ubuntu</code>。本文指导读者快速入门<code>shell</code>脚本编程而刻意模糊化其他基本概念，本系列于<code>2022-07-28</code>开始更新，每天更新一个小节，直到结束，主要是讲解<code>shell</code>编程，其中也会涉及到相关的<code>Linux</code>知识。</p>
<p>整个<code>shell</code>系列不会讲解如何安装双系统，也不会讲解如何安装虚拟机以及<code>Linux</code>相关版本的镜像文件。如果你需要相关的虚拟机和Linux的安装视频，我推荐这个：</p>
<blockquote>
<p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV18U4y1W7av?spm_id_from=333.999.0.0&amp;vd_source=5acf5a7b23d28e7633e5a9b381c57c42" >https://www.bilibili.com/video/BV18U4y1W7av?spm_id_from=333.999.0.0&amp;vd_source=5acf5a7b23d28e7633e5a9b381c57c42</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</blockquote>
<p>B站关注<strong>Micro_Frank</strong>。</p>

        <h1 id="ssh连接Ubuntu"   >
          <a href="#ssh连接Ubuntu" class="heading-link"><i class="fas fa-link"></i></a><a href="#ssh连接Ubuntu" class="headerlink" title="ssh连接Ubuntu"></a>ssh连接Ubuntu</h1>
      <p>我不是很喜欢在虚拟机里面使用命令行，所以就在外部通过终端来访问虚拟机上的<code>Ubuntu</code>。</p>
<ul>
<li>在<code>Ubuntu</code>中使用命令<code>ifcofig</code>查看系统<code>IP</code>地址。</li>
</ul>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/28/e434cc286d6c0917.png" alt="image-20220728152200134"></p>
<p>当然，有可能使用了<code>ipconfig</code>查不到<code>IP</code>地址，那么请使用<code>sudo dhclient ens33</code>命令，具体你可以百度。</p>
<ul>
<li>在自己桌面使用<code>win+r</code>，输入<code>cmd</code>。使用<code>ssh</code>连接：<code>ssh 用户名@IP地址</code>。</li>
</ul>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/28/573c6233451b027a.png" alt="image-20220728152655411"></p>
<p>之前因为某些原因，我的<code>Ubuntu</code>修改过<code>ssh</code>连接的端口号，所以在连接时需要通过<code>-p</code>选项来指定端口号。如果你没有改过，就不需要指定了。</p>

        <h1 id="下载Vim"   >
          <a href="#下载Vim" class="heading-link"><i class="fas fa-link"></i></a><a href="#下载Vim" class="headerlink" title="下载Vim"></a>下载Vim</h1>
      <p><code>Vim</code>是一个超级强大的编辑器，我也不是很熟练，主要就是用的少。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install vim</span><br></pre></td></tr></table></div></figure>

<p>我已经下载过了，就不截图了，实在不会你就去百度。</p>

        <h1 id="创建脚本文件"   >
          <a href="#创建脚本文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#创建脚本文件" class="headerlink" title="创建脚本文件"></a>创建脚本文件</h1>
      <p>作为学习使用，我建议你先创建一个文件夹用来存放你平时写的练习脚本，文件名可以叫<code>Shell_Files</code>，随便你啦。</p>
<ul>
<li>进入你刚才创建的文件夹：<code>cd Shell_Files</code>。</li>
<li>创建一个文件：<code>touch test_1</code>，不需要跟后缀。文件后缀的作用无非就是打开这个文件的方式（你现在可以这么理解），也可以跟<code>sh</code>后缀，比如<code>touch test_1.sh</code>。</li>
<li>使用<code>vim</code>来编写脚本程序：<code>vim test_1.sh</code>。进入到编辑界面后，请不要乱动键盘，你现在并没有处于编辑模式。敲击<code>i</code>键进入<code>insert</code>模式，你就可以编辑了，你可以输入以下代码</li>
</ul>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">val=10</span><br><span class="line">while echo &quot;&quot;</span><br><span class="line">do</span><br><span class="line">        echo &quot; testing... &quot;</span><br><span class="line">done</span><br></pre></td></tr></table></div></figure>

<p>在<code>shell</code>中，<code>#</code>后面跟的是注释，但是在编写脚本时，你必须加上第一行的注释来指定你要是用的<code>shell</code>，你不会以为<code>shell</code>里面只有<code>bash</code>吧？第二行是定义一个变量（弱类型语言），<code>while</code>里面应该跟上判断条件，条件为<code>true</code>继续执行，为<code>false</code>结束执行。但是<code>echo</code>是自动换行的<strong>打印语句</strong>，所以<strong>成功执行</strong>了<code>echo &quot;&quot;</code>，<code>while</code>里面就判断为<code>true</code>。然后执行<code>echo &quot;testing... &quot;</code>。</p>
<p>代码编写完后，敲击<code>Esc</code>，再输入冒号，再输入<code>wq</code>，<code>w</code>是<code>write</code>，<code>q</code>是<code>quit</code>。回车，即可保存退出。同学，我劝你不要乱点啊🐶。</p>

        <h1 id="修改文件权限"   >
          <a href="#修改文件权限" class="heading-link"><i class="fas fa-link"></i></a><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h1>
      <p>一般来说，你刚创建的文件只有读<code>r</code>和写<code>w</code>的权限，并没有执行<code>x</code>该文件的权限。请按顺序调用以下命令：</p>
<ul>
<li><code>chmod u+x test_1.sh</code>，该命令为脚本文件赋予可执行的权限，其实到这里，你的脚本文件就可以执行了。</li>
<li><code>touch new_file</code>创建一个新的文件，该文件只有读和写的权限</li>
<li><code>ll</code>，其实该命令就是<code>ls -al</code>的简写。</li>
</ul>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/28/2a7d3da1cb4c1b84.png" alt="image-20220728155413986"></p>
<p>从上图可以看出，下面两个可执行文件（绿色）比<code>new_File</code>多了一个<code>x</code>，这其实就是执行权限。</p>

        <h1 id="运行脚本文件"   >
          <a href="#运行脚本文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#运行脚本文件" class="headerlink" title="运行脚本文件"></a>运行脚本文件</h1>
      <p>运行文件，只需要执行以下命令</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./test_1.sh</span><br></pre></td></tr></table></div></figure>

<p>其中<code>./</code>表示当前目录下，<code>test_1.sh</code>是指定文件名。为什么非要加<code>./</code>呢？我明明已经在当前目录下了，能不能直接使用<code>test_1.sh</code>来运行呢？可以，这个涉及到环境变量，这是后话，nice，又挖一个坑，你要是求知心切，就去百度吧。</p>
<p>哦，你想要停下你的脚本运行，使用<code>ctrl+c</code>即可。</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/07/28/Database/MySQL/B-%E6%A0%91%E7%B4%A2%E5%BC%95/">B+树索引</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-07-28</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-07-28</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#简介" class="headerlink" title="简介"></a>简介</h1>
      <p>我们使用sql语句查询某条记录时</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from 表名 where 列名 = xxx;</span><br></pre></td></tr></table></div></figure>

<p><code>where</code>后面跟着的是查询条件，我们之前学的，页中的记录是根据主键排序的（如果没有主键，就根据不能为NULL的唯一的数据排序，如果这样的属性也没有，就按照<code>row_id</code>排序）。</p>
<p>那么在没有创建索引的情况下，如果我们的查询条件是根据主键查询，那么在页中就可以通过二分查找快速获取数据，但是如果<code>where</code>后面跟着的是一个非主键属性，那么在页中就只能从<code>Infimum</code>到<code>Supremum</code>一条一条的<strong>顺序查找</strong>，<strong>一下子就慢很多</strong>。</p>
<p>所以我们必须找到一种高效的搜索方法——索引。</p>

        <h1 id="索引"   >
          <a href="#索引" class="heading-link"><i class="fas fa-link"></i></a><a href="#索引" class="headerlink" title="索引"></a>索引</h1>
      <p>先建一个表，后面方便演示例子。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table index_demo (</span><br><span class="line">    c1 int,</span><br><span class="line">    c2 int,</span><br><span class="line">    c3 char(1)，</span><br><span class="line">    primary key (c1)</span><br><span class="line">) row_format = COMPACT;</span><br></pre></td></tr></table></div></figure>

<p>我们知道，一个页默认只有16KB，存储的记录是有限的，所以一个表往往需要很多个页，<strong>页之间的记录也必须保持顺序</strong>，也就是说，<strong>页A的记录主键值必须大于上一个页的记录主键值，小于下一页的记录的主键值</strong>（当然，这里面不包含<code>Infimum</code>和<code>Supremum</code>）。</p>
<p>前文讲页结构时，<code>File Header</code>中对于页号的规定使得<strong>数据页之间连成双向链表</strong>，我们期望为快速定位记录所在的数据页而建立一个别的目录，该目录实现：</p>
<ul>
<li>下一个数据页的记录的主键 &gt; 上一个数据页记录的主键。</li>
</ul>
<p>为了实现这个状态，存在<strong>页分裂</strong>的机制。假设上一个页已经满了，最后一条记录主键是100，现在又加入一条记录，主键为90。那么新加入的这条记录就会放到该页末尾，主键为100的记录会被分到新的一个页。</p>
<ul>
<li>给所有页建立一个<strong>目录项</strong></li>
</ul>
<p>此处是关于页的目录其实对于页的查找也是二分（就是根据页目录，之前的槽<code>Slot</code>是关于记录的<code>Page Directory</code>）。<strong>每个页对应一个目录项</strong>，每个<strong>目录项</strong>包括两部分：<strong>页的最小主键值</strong>+<strong>页号</strong><code>page_no</code>。插入记录时，根据主键值，在所有<strong>目录项</strong>下进行二分查找，找到合适的页后，根据页中的<code>Page Directory</code>进行二分查找，然后页分裂（如果有的话）。最重要的就是，这个目录就叫——<strong>索引</strong>。</p>

        <h2 id="简单的索引方案"   >
          <a href="#简单的索引方案" class="heading-link"><i class="fas fa-link"></i></a><a href="#简单的索引方案" class="headerlink" title="简单的索引方案"></a>简单的索引方案</h2>
      <p>为了实现通过<strong>目录项</strong>来进行二分查找，我们也要<strong>管理目录项</strong>，使其在增删改查时保持有序，所以也把它们放在页中进行管理，这种记录就是<strong>目录项记录</strong><code>record_type = 1</code>（你还记得<code>record_type</code>为0，2，3时是什么意思吗）,该记录也就只有主键值和页号，<strong>当然头信息也是存在的</strong>，因为只有主键值（如果不是变长字段或变长字符集），所以没有变长字段长度列表，也没有NULL列表。</p>
<p>不断累积，目录项页也存在目录项，这样的目录项又被放进新的目录项页（只不过在上一层），不断向上递归，形成B+树。</p>
<p>说了那么多，不看图总是懵逼的。</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/28/f4fdab5241230111.png" alt="image-20220728104845461"></p>
<p>这个图画的我难受。。。。</p>
<p>上图为了简略，一个记录的内容我只画了：<code>record_type</code>+<code>next_record</code>+<code>c1</code>+<code>c2</code>+<code>c3</code>。</p>
<p>从图中可以看出，我们真正的记录是放在B+树中的叶子节点，存放目录项记录的都是内节点。</p>
<p><code>Page Header</code>里面有个属性就是<code>PAGE_LEVEL</code>表示该页在B+树中的层级。其实我们谈索引，什么对某个属性A创建索引，其实就是创建以A排序的B+树（当然，这么说不准确，B+树内容不同，但是你可以这么理解）。我们一开始创建表，指定<code>c1</code>为主键，那么我们插入记录时，<code>InnoDB</code>就会维护上图的B+树，使其有序。如果我们创建关于<code>c2</code>的索引，我们就会得到一个关于<code>c2</code>排序的B+树。</p>
<blockquote>
<p>索引的B+树和真正的主键的B+树有什么不同，之后讲到回表你就懂了</p>
</blockquote>

        <h2 id="索引种类"   >
          <a href="#索引种类" class="heading-link"><i class="fas fa-link"></i></a><a href="#索引种类" class="headerlink" title="索引种类"></a>索引种类</h2>
      <p><strong>聚簇索引</strong>：在InnoDB中，聚簇索引就是数据的存储方式，所有记录都存在叶子节点，“索引即数据，数据即索引”</p>
<p>二级索引：聚簇索引只有在搜索条件为主键时才能发挥作用，如果以其他列为搜索条件，就要创建关于他们的索引（B+树）才行，这就是二级索引。假设对<code>c2</code>创建索引，该二级索引B+树的叶子节点的记录存储的就是<strong>c2+主键值</strong>。当我们在二级索引中找到对应的<code>c2</code>，我们就可以拿到对应的主键值，然后<strong>再去聚簇索引中找到真正完整的数据，这就是回表</strong>。二级索引之所以不存储完整的记录，<strong>那肯定是为了节省空间啊</strong>。</p>
<p>联合索引：其本质就是二级索引，因为有时我们会这么查询</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from index_demo where c2 = 1 and c3 = &#x27;1&#x27;;</span><br></pre></td></tr></table></div></figure>

<p>所以我们此时就要创建关于<code>c2,c3</code>的联合索引。</p>
<p>一个索引的根页面，一旦被创建，其页号就不会改变。一开始是没有数据的，每当存在数据插入，都是在这个根节点下插入</p>

        <h1 id="sql语句"   >
          <a href="#sql语句" class="heading-link"><i class="fas fa-link"></i></a><a href="#sql语句" class="headerlink" title="sql语句"></a>sql语句</h1>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># key和index是同义词，随便指定一个即可</span><br><span class="line">create table 表名 (</span><br><span class="line">    各个列信息</span><br><span class="line">    (key|index) 索引名 (要指定的列)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">alter table 表名 add (key|index) 索引名 (要指定的列)</span><br><span class="line"></span><br><span class="line"># 删除索引</span><br><span class="line">alter table drop (index|key) 索引名</span><br></pre></td></tr></table></div></figure>

</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/07/26/Database/MySQL/InnoDB%E9%A1%B5%E7%BB%93%E6%9E%84/">InnoDB页结构</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-07-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-07-27</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="前言"   >
          <a href="#前言" class="heading-link"><i class="fas fa-link"></i></a><a href="#前言" class="headerlink" title="前言"></a>前言</h1>
      <p>之前说过，页是InnoDB<strong>管理磁盘空间</strong>的基本单位，一个页的大小基本上是16KB。MySQL规定一页至少存两条记录。我们从客户端写入表中的记录会被存在页中，其实还有一种记录，它存在于B+树的非叶子节点的页中，其头信息中的<code>record_type=1</code>。</p>
<p>目前你只需理解，页中存储的记录要么是我们从客户端写入的真实的记录<code>record_type=0</code>。这样的页称为<strong>索引页</strong>；另一个是B+树非叶子节点的目录项记录<code>record_type=1</code>。</p>

        <h2 id="页结构"   >
          <a href="#页结构" class="heading-link"><i class="fas fa-link"></i></a><a href="#页结构" class="headerlink" title="页结构"></a>页结构</h2>
      <p>本节内容主要是就要了解页的大致结构和其存储记录的方式，下图为一个页的基本结构。</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/26/55c753f812c612e5.png" alt="image-20220726110822415"></p>
<p>之后我们会对其中的结构一 一讲解。但是直接给出很多概念会让你失去阅读兴趣，所以我们先看一下记录怎么在页中存储。</p>

        <h2 id="记录在页中的存储"   >
          <a href="#记录在页中的存储" class="heading-link"><i class="fas fa-link"></i></a><a href="#记录在页中的存储" class="headerlink" title="记录在页中的存储"></a>记录在页中的存储</h2>
      <p>请看上图的<code>User Records</code>和<code>Free Space</code>，我们的记录就存放在<code>User Records</code>，如果<code>User Records</code>的空间不够了，就向<code>Free Space</code>去申请空间。所以一个页刚开始创建的时候，是没有<code>User Records</code>的。当<code>Free Space</code>全部被<code>User Record</code>代替时，该页就满了。恭喜，页结构七个概念你已经懂了两个。</p>
<p>我们的记录在<code>User Record</code>里面是一条一条摆放进去的，但是我现在要提一下一条记录里的<strong>头信息</strong>（你不会已经忘了什么是头信息了吧，不会吧，不会吧）。</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/26/81205e50ebf500f5.png" alt="image-20220725112044762"></p>
<p><code>record_type</code>可以是，0–普通记录，1–B+树非叶子节点的目录项记录，2–Infimum，3–supremum。请看页结构图，红色区域就是<code>Infimum,supremum</code>，也就是说，每个页固定都有这两条记录，他们代表所有记录中的最小记录（链表头节点）以及所有记录中的最大记录（链表尾节点），<strong>尽管它们没有主键值，但它们就是最小和最大。</strong>这两条记录没有实际内容，但这是规定！这样每次查询记录时，都能从一个固定的起点查询。</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/26/986c7070b2da0836.png" alt="image-20220726131306378"></p>
<p><code>User Record</code>里面的记录排列紧密，一条紧接另一条。这个其实就是堆，<code>heap_no</code>就是该记录在堆中的相对位置。比如我顺序写入了a,b,c三条记录，它们的<code>heap_no</code>就是2，3，4。至于0和1，它们是<code>Infimum,supremum</code>的<code>heap_no</code>值。其实从图就可以看出，<code>Infimum,supremum</code>在<code>User_record</code>上面。</p>

        <h3 id="next-record的计算"   >
          <a href="#next-record的计算" class="heading-link"><i class="fas fa-link"></i></a><a href="#next-record的计算" class="headerlink" title="next_record的计算"></a>next_record的计算</h3>
      <p>很好，进入到了喜闻乐见的计算环节，我会尽量让你懂的。</p>
<p><code>next_record</code>不就是指向下一条记录嘛，那它指向下一条记录的那个部位呢？我们知道，头信息右边是默认添加数据（就是row_id,trx_id,roll_pointer)，接着是真实信息。</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/26/e4c3645b69edae43.png" alt="image-20220726115106879"></p>
<p><code>next_record</code>指向的是下一条记录的真实信息，其实存储的是一个以字节为单位的偏移量。比如第四条记录的<code>next_record=-111</code>,就是指从第四条记录的真实数据的地址开始，上前找111个字节就是下一条记录的真实数据的地址。</p>
<p>所以，页中的记录因为<code>next_record</code>而形成了链表，在插入新的记录时，InnoDB始终维护链表中节点的从小到大的顺序（维护顺序当然是为了二分查找）。</p>
<p>为了让读者感受一下<code>next_record</code>的计算过程，我们创建一个表玩一下</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">create table test_next_record (</span><br><span class="line">	c1 int,</span><br><span class="line">    c2 int,</span><br><span class="line">    c3 varchar(10000),</span><br><span class="line">    primary key (c1)</span><br><span class="line">) character set acsii,row_format=COMPACT；</span><br><span class="line">#使用 ascii字符集，一个字符用一个字节表示 </span><br><span class="line"></span><br><span class="line">#插入一条数据</span><br><span class="line">insert into test_next_record values(1,100,&#x27;aaaa&#x27;);</span><br></pre></td></tr></table></div></figure>

<p>那么在页中实际是这个样子的</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/26/71735b9e7f52f0b7.png" alt="image-20220726130854616"></p>
<p><code>Infimum</code>中的41是如何计算的：<code>Infimum</code>8字节<code>+Supremum</code>整条记录13字节+变长字段1字节+NULL值列表1字节+头信息5字节+<code>trx_id</code>6字节+<code>roll_pointer</code>7字节&#x3D;41字节。</p>
<p><code>next_record</code>指向真实信息和头信息中间，这个位置刚刚好，向左是NULL值列表（逆序存放）和变长字段长度列表（逆序存放），向右是真实信息。逆序可以使得记录中靠前的字段和它们对应的字段长度列表在内存中靠得更近，可能会<strong>提高缓存命中率</strong>。</p>

        <h2 id="File-Header"   >
          <a href="#File-Header" class="heading-link"><i class="fas fa-link"></i></a><a href="#File-Header" class="headerlink" title="File Header"></a>File Header</h2>
      <p>校验和：对于一个很长的字符串，通过算法计算出比较短的值代表这个长字符串，这个值就是校验和。</p>
<div class="table-container"><table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>FIL_PAGE_SPACE_OR_CHKSUM</td>
<td>(4Byte)空间或校验和，MySQL版本低于4.0.14时，该属性表示本页面所在的<strong>表空间ID</strong>；之后的版本表示页的<strong>校验和</strong></td>
</tr>
<tr>
<td>FIL_PAGE_OFFSET</td>
<td><strong>页号</strong>，对于页号的分配，并不是连续的，也就是说<strong>使用的页在磁盘上可能并不挨着（当然是尽可能挨着）</strong></td>
</tr>
<tr>
<td>FIL_PAGE_PREV</td>
<td>上页的页号</td>
</tr>
<tr>
<td>FIL_PAGE_NEXT</td>
<td>下页的页号（形成双向链表）</td>
</tr>
<tr>
<td>FIL_PAGE_TYPE</td>
<td><strong>页的类型</strong></td>
</tr>
<tr>
<td>FIL_PAGE_ARCH_LOG_NO_OR_SPACE_ID</td>
<td>页属于哪个表空间</td>
</tr>
<tr>
<td>FIL_PAGE_LSN</td>
<td>页面被最后修改时对应的LSN（Log Sequence Number，日志序列号）</td>
</tr>
</tbody></table></div>
<p>表格中内容看起来比较多，但是梳理一下就很清晰。</p>
<p>首先，MySQL具有良好的健壮性，比如内存中的页<strong>正在</strong>被刷新到磁盘中，但是此时突然断电了，导致刷新时只刷了一部分。我们就需要使用校验和来判断一个页是否被完整的刷新到磁盘中，这个在<code>File Trailer</code>部分会讲解到。</p>
<p>其实，B+树的节点就是页，页与页之间形成一个多叉树的同时，同一层的节点又形成双向链表。</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/26/d5d6dec569020c94.png" alt="image-20220726112224302"></p>
<p>这样，我们就记住了中间三个属性。最后的<code>FIL_PAGE_TYPE</code>表示页的类型，肯定啊，MySQL这么大，肯定不可能只有1种页。</p>

        <h2 id="Page-Directory"   >
          <a href="#Page-Directory" class="heading-link"><i class="fas fa-link"></i></a><a href="#Page-Directory" class="headerlink" title="Page Directory"></a>Page Directory</h2>
      <p>现在记录通过<code>next_record</code>连成了一个有序单向链表，对链表使用二分查找过程大致如下：</p>
<ul>
<li>将记录分为若干组，每个组最大的那个记录，其<code>n_owned</code>表示该组记录数。</li>
<li>将每组最大记录的地址偏移量拿出来，按顺序排列在<code>Page Dierctory</code>中。</li>
<li>这些偏移量被称为槽–<code>slot</code>，每个槽位2字节，<code>Page Dierctory</code>就是由若干个槽组成。</li>
<li>你可以把一个个顺序排列的槽看作一个数组，槽对应的记录越小，就越接近<code>File Trailer</code>。</li>
</ul>
<p>关键的问题是怎么分组，机制为：</p>
<ul>
<li>对于<code>Infimum</code>记录所在的分组，只能有一条记录。即最靠近<code>File Trailer</code>的槽始终是<code>Infimum</code>。</li>
<li>对于<code>supermum</code>记录所在的分组，可以有1~8条记录。</li>
<li>其余组只能有4~8条记录，如果组中记录大于8条，会4,5分为两组，并生成一个新的<code>slot</code>。</li>
<li>每次插入一条记录，该记录都会从页目录中寻找对应记录的主键值比待插入记录主键值大且差值最小的<code>slot</code>（然后找到前一个槽A，A对应的记录开始遍历插入即可）</li>
</ul>
<p>配合这种机制，哪怕记录插入表中，记录在每个槽中也会保持有序，并且每个组中记录的主键逐渐紧凑。</p>
<p>下图省略了记录之间的连接：</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://s3.bmp.ovh/imgs/2022/07/27/350085bbd3bc62f9.png" alt="image-20220727133511829"></p>
<p>上图相当于是：<code>slot_0=Infimum</code>，<code>slot_1=4</code>，<code>slot_2=Supremum</code>。假设要查询记录7，就相当于在数组<code>[Min,4,Max]</code>里面进行二分查找，最后找到4，记录4的下一条记录就是槽2的组的记录，就相当于遍历槽2的组，直到找到目标记录。</p>

        <h2 id="Page-Header"   >
          <a href="#Page-Header" class="heading-link"><i class="fas fa-link"></i></a><a href="#Page-Header" class="headerlink" title="Page Header"></a>Page Header</h2>
      <p>总共56字节，该结构是存储数据页中记录的状态信息，比如页中的记录数，<code>Free Space</code>的偏移量，页目录有多少个槽等。下图只是部分结构，没有写完，记不住问题也不大，但是看到这里，下面的部分属性你肯定很熟悉。</p>
<div class="table-container"><table>
<thead>
<tr>
<th>属性</th>
<th>长度</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>PAGE_HEAP_TOP</td>
<td>2Byte</td>
<td>还未使用的空间的最小地址，向后走就是Free Space</td>
</tr>
<tr>
<td>PAGE_N_HEAP</td>
<td>2Byte</td>
<td>第1位表示是否为紧凑型记录，剩余的15位表示本页的堆中的记录（包括Infimumu,supermum和已删除记录）</td>
</tr>
<tr>
<td>PAGE_FREE</td>
<td>2Byte</td>
<td>垃圾链表头节点对应记录在页面中的偏移量</td>
</tr>
<tr>
<td>PAGE_GARBAGE</td>
<td>2Byte</td>
<td>已删除记录占用的字节数</td>
</tr>
<tr>
<td>PAGE_DIRECTION</td>
<td>2Byte</td>
<td>记录插入的方向，向后是right</td>
</tr>
<tr>
<td>PAGE_N_DIRECTION</td>
<td>2Byte</td>
<td>记录连续插入同一个方向的记录条数，当插入方向不同时，马上重置刷新</td>
</tr>
<tr>
<td>PAGE_N_RECS</td>
<td>2Byte</td>
<td>该页用户记录的数量（不包括Infimumu,supermum和已删除记录）</td>
</tr>
<tr>
<td>PAGE_MAX_TRX_ID</td>
<td>8Byte</td>
<td>修改当前页的最大事务id，该值仅在二级索引页面中定义</td>
</tr>
<tr>
<td>PAGE_LEVEL</td>
<td>2Byte</td>
<td>2Byte,该页在B+树中的层级</td>
</tr>
</tbody></table></div>

        <h1 id="File-Trailer"   >
          <a href="#File-Trailer" class="heading-link"><i class="fas fa-link"></i></a><a href="#File-Trailer" class="headerlink" title="File Trailer"></a>File Trailer</h1>
      <p>在<code>File Header</code>提到过校验和。如果页从内存刷新到磁盘中断电了，导致之刷新了一部分到磁盘中该怎么办？<code>File Trailer</code>就是为了<strong>检验</strong>一个页是否刷新完整（至于如何恢复，那就的学到日志那才知道了）</p>
<p>该部分由8个字节组成：</p>
<ul>
<li>前四个字节代表页的校验和，该部分与<code>File Header</code>的校验和相对应。 <strong>每次</strong>页在内存中发生<strong>修改</strong>时，在刷新前就要把校验和算出来。以页A（假设校验和为1）刚从磁盘读到内存为例，修改之后校验和为2，那么此时磁盘中的页A和内存中的页A校验和不一样。刷新到磁盘时，<code>File Header</code>的磁盘先被刷新到磁盘中，如果断电导致<code>File Trailer</code>的校验和没有刷新进去，那么磁盘中的<code>File Header</code>与<code>File  trailer</code>的校验和就不一样。</li>
<li>后四个字节是页面最后被修改时对应的LSN的后4个字节，与<code>File Header</code>相对应，也是检验页完整性。</li>
</ul>

        <h1 id="引用"   >
          <a href="#引用" class="heading-link"><i class="fas fa-link"></i></a><a href="#引用" class="headerlink" title="引用"></a>引用</h1>
      <blockquote>
<p>本文总结于《从根上理解MySQL》第五章p72-p89，作者：小孩子4919。对于有能力或者兴趣的读者，鄙人强烈推荐这本书，如果您能够通过正规渠道购买，支持作者，支持正版，支持每一颗热爱技术的心，我将感激不尽。</p>
</blockquote>
</div></div></article></section><nav class="paginator"><div class="paginator-inner"><a class="extend prev" rel="prev" href="/page/3/"><i class="fas fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fas fa-angle-right"></i></a></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/icons/logo.png" alt="avatar"></div><p class="sidebar-ov-author__text">You have lots more to work on</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">45</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">2</div><div class="sidebar-ov-state-item__name">分类</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">7</div><div class="sidebar-ov-state-item__name">标签</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_tw" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2022</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Cyan</span></div><div><span>由 <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> 强力驱动</span><span> v6.2.0</span><span class="footer__devider">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.7.0</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.7.0"></script><script src="/js/stun-boot.js?v=2.7.0"></script><script src="/js/scroll.js?v=2.7.0"></script><script src="/js/header.js?v=2.7.0"></script><script src="/js/sidebar.js?v=2.7.0"></script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>