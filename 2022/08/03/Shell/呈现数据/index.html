<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.7.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.7.0" type="image/png" sizes="32x32"><meta name="description" content="简介       之前关于标准输入，输出重定向的文章，我提到开始接触流，并且在文中讲解时使用也是以流来具体化重定向的作用，但是讲解的非常不严谨。本文相当于对重定向深入讲解，甚至可以自定义重定向。                     标准文件描述符       Linux系统将每个对象当作文件处理（有句话就是一切皆文件），包括输入和输出，用文件描述符标识每">
<meta property="og:type" content="article">
<meta property="og:title" content="呈现数据">
<meta property="og:url" content="https://cecilia.cool/2022/08/03/Shell/%E5%91%88%E7%8E%B0%E6%95%B0%E6%8D%AE/index.html">
<meta property="og:site_name" content="慕青的日记">
<meta property="og:description" content="简介       之前关于标准输入，输出重定向的文章，我提到开始接触流，并且在文中讲解时使用也是以流来具体化重定向的作用，但是讲解的非常不严谨。本文相当于对重定向深入讲解，甚至可以自定义重定向。                     标准文件描述符       Linux系统将每个对象当作文件处理（有句话就是一切皆文件），包括输入和输出，用文件描述符标识每">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-08-03T03:30:29.000Z">
<meta property="article:modified_time" content="2022-08-03T08:18:07.509Z">
<meta property="article:author" content="Cyan">
<meta property="article:tag" content="shell">
<meta name="twitter:card" content="summary"><title>呈现数据 | 慕青的日记</title><link ref="canonical" href="https://cecilia.cool/2022/08/03/Shell/%E5%91%88%E7%8E%B0%E6%95%B0%E6%8D%AE/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.7.0"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"carbon","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.2.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">标签</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">慕青的日记</div><div class="header-banner-info__subtitle">Cyan</div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">呈现数据</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-08-03</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-08-03</span></span></div></header><div class="post-body">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#简介" class="headerlink" title="简介"></a>简介</h1>
      <p>之前关于标准输入，输出重定向的文章，我提到开始接触流，并且在文中讲解时使用也是以流来具体化重定向的作用，但是讲解的非常不严谨。本文相当于对重定向深入讲解，甚至可以自定义重定向。</p>

        <h1 id="标准文件描述符"   >
          <a href="#标准文件描述符" class="heading-link"><i class="fas fa-link"></i></a><a href="#标准文件描述符" class="headerlink" title="标准文件描述符"></a>标准文件描述符</h1>
      <p><code>Linux</code>系统将每个对象当作文件处理（有句话就是一切皆文件），包括输入和输出，用文件描述符<strong>标识</strong>每个文件对象。文件描述符是一个<strong>非负整数</strong>，可以唯一表示会话中打开的文件。出于特殊目的，<code>bash shell</code>在每个进程，只保留了3个文件标识符(0,1,2)</p>
<ul>
<li><code>STDIN</code>–标准输<strong>入</strong>。对于终端界面，<strong>标准输入是键盘</strong>。<code>shell</code>从<code>STDIN</code>对应的键盘获得输入。使用输入重定向符号<code>&lt;</code>，<code>Linux</code>会使用重定向指定的文件来替换标准文件描述符，会读取文件并提取数据，如同是在键盘上键入的。</li>
<li><code>STDOUT</code>–标准输<strong>出</strong>。同标准输入类似，shell所有输出都会被定向到标准输出中，也就是显示器。</li>
<li><code>STDERR</code>–错误消息对于错误消息，<strong>也是重定向到显示器的</strong>，但是错误消息和一般标准输出是分开的。比如：<code>ls -l badfile &gt; test</code>，如果没有<code>badfile</code>就会报错，但是错误信息并没有给<code>test</code>。</li>
</ul>
<p>我们之前知道如何重定向标准输入和标准输出，现在讲解如何重定向错误信息。</p>
<ul>
<li>只重定向错误：将<code>STDERR</code>文件描述符的值<code>(2)</code>紧紧放在重定向符号前，<code>ls -al badfile 2&gt; test</code>。但是这种方法，如果该命令的输出既包含错误信息，也包含标准输出，那么标准输出还是会输出到屏幕中。</li>
<li>重定向错误和数据：我们肯定不希望重定向的数据和错误信息在同一文件中（难道你希望错误日志里面还给你保存几句莫名其妙的打印语句吗），所以必须使用两个重定向符号，需要在符号面前放上各自文件描述符值：<code>ls -al test test2 test3 badtest 2&gt; testSTDERR 1&gt; testSTDOUT</code>（其中<code>test*</code>文件都存在，<code>badtest</code>不存在）。   当然，也可以将数据和错误重定向到同一文件： <code>ll n_File bad_File new_File &amp;&gt; STD_ALL</code>。<code>bash shell</code>自动赋予了错误消息更高的优先级，方便集中浏览错误信息，也就是说，<code>ll A B C</code>中<code>B</code>文件不存在，那么输出时会优先输出关于<code>B</code>的错误信息。</li>
</ul>

        <h1 id="脚本中的标准重定向输出和输入"   >
          <a href="#脚本中的标准重定向输出和输入" class="heading-link"><i class="fas fa-link"></i></a><a href="#脚本中的标准重定向输出和输入" class="headerlink" title="脚本中的标准重定向输出和输入"></a>脚本中的标准重定向输出和输入</h1>
      <p>对于三个标准文件描述符，一定要记住，使用<code>exec</code>命令时数字放在箭头左边。当数字出现在右边，要用<code>&amp;</code>符号。</p>

        <h2 id="临时重定向"   >
          <a href="#临时重定向" class="heading-link"><i class="fas fa-link"></i></a><a href="#临时重定向" class="headerlink" title="临时重定向"></a>临时重定向</h2>
      <p>在脚本中生成错误消息，可以将单独的一行输出重定向到<code>STDERR</code>，不同的是，在脚本中，格式为<code>&gt;&amp;2</code>。<code>echo &quot;This is error&quot; &gt;&amp;2</code>，这样，该行就会指向<code>STDERR</code>的位置，也就类似于终端上的错误信息一样。</p>
<p>这种操作可以用于检测脚本运行时传入的选型或者参数是否正确，如果不正确就可以通过<code>&gt;&amp;2</code>来生成错误信息。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat test</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">echo &quot;This is error&quot; &gt;&amp;2</span><br><span class="line">echo &quot;This is normal&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">运行脚本，并将脚本的错误信息重定向到result1文件中</span></span><br><span class="line">./test 2&gt; result1</span><br><span class="line">This is normal</span><br><span class="line"></span><br><span class="line">cat result1</span><br><span class="line">This is an error</span><br></pre></td></tr></table></div></figure>




        <h2 id="永久重定向"   >
          <a href="#永久重定向" class="heading-link"><i class="fas fa-link"></i></a><a href="#永久重定向" class="headerlink" title="永久重定向"></a>永久重定向</h2>
      <p>上面的临时重定向，比如我一个脚本有很多行生成错误信息并需要重定向，而每一行都是用<code>&gt;&amp;2</code>太麻烦了，那么就可以使用<code>exec</code>命令来进行永久重定向。</p>
<p><code>exec</code>命令告诉<code>shell</code>在脚本中执行期间重定向某个特定文件描述符。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">exec 1&gt; STD_output_file</span><br><span class="line">....</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">那么脚本中该命令之下的所有标准输出都重定向到了STD_output_file中</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">同理，改变标准输入，这对于从待处理文件中读取数据有很大帮助</span></span><br><span class="line">exec 0&lt; STD_input_file</span><br></pre></td></tr></table></div></figure>



        <h1 id="自定义重定向"   >
          <a href="#自定义重定向" class="heading-link"><i class="fas fa-link"></i></a><a href="#自定义重定向" class="headerlink" title="自定义重定向"></a>自定义重定向</h1>
      <p><code>Linux</code>系统本来每个进程都有<strong>9个</strong>文件描述符，3个标准，剩下6个都可以用于自定义，<strong>这6个可以任意作为输入还是输出</strong>。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exec 6&gt; testout</span><br><span class="line">echo &quot;This is a data&quot;&gt;&amp;6</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果使用&gt;&gt;就是追加模式</span></span><br></pre></td></tr></table></div></figure>

<p>如果你想恢复一个被重定向的文件描述符</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">exec 3&gt;&amp;1   #3指向1</span><br><span class="line">exec 1&gt;testout</span><br><span class="line">.....</span><br><span class="line">exec 1&gt;&amp;3</span><br></pre></td></tr></table></div></figure>

<p>创建<strong>读写</strong>文件描述符</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exec 4&lt;&gt; testfile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">输入输出时，文件指针是共享的。同时注意&gt;&gt;的追加模式与该特性的使用</span></span><br></pre></td></tr></table></div></figure>

<p>关闭文件描述符时，一般创建了新的输入输出文件描述符，脚本退出时，<code>shell</code>就会自动关闭它们。手动关闭：<code>exec 3&gt;&amp;-</code>。一旦关闭，就不能在写入&#x2F;读取数据，否则就会报错。</p>

        <h1 id="lsof命令"   >
          <a href="#lsof命令" class="heading-link"><i class="fas fa-link"></i></a><a href="#lsof命令" class="headerlink" title="lsof命令"></a>lsof命令</h1>
      <p>网上给的知识有些凌乱，甚至有些错误，所以我会总结几篇文章，最后给一下参考。</p>
<p><code>lsof--list open files</code>，列出当前系统已经打开的所有文件，一般<code>lsof</code>命令位于<code>/usr/bin/losf</code>或者是<code>/usr/sbin/lsof</code>。因为终端运行时，会有很多文件被打开使用，如果直接使用<code>lsof</code>会出现很多结果，我们在使用时一定要灵活使用相关的选项来控制输出。</p>
<div class="table-container"><table>
<thead>
<tr>
<th align="center">选项</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-a</td>
<td align="center">对给的选项进行<strong>与</strong>运算</td>
</tr>
<tr>
<td align="center">-p<pid></td>
<td align="center">列出指定进程号所打开的文件</td>
</tr>
<tr>
<td align="center">-d&lt;文件号&gt;</td>
<td align="center">列出占用该文件号的文件</td>
</tr>
<tr>
<td align="center">+d&lt;目录&gt;</td>
<td align="center">列出目录下被打开的文件</td>
</tr>
<tr>
<td align="center">-c&lt;进程名&gt;</td>
<td align="center">列出指定进程所打开的文件</td>
</tr>
</tbody></table></div>
<p>根据上面的部分选项，我们使用一下该命令</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">lsof -a -p $$ -d 0,1,2</span><br><span class="line">COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">bash    29075 cyan    0u   CHR  136,0      0t0    3 /dev/pts/0</span><br><span class="line">bash    29075 cyan    1u   CHR  136,0      0t0    3 /dev/pts/0</span><br><span class="line">bash    29075 cyan    2u   CHR  136,0      0t0    3 /dev/pts/0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">变量$$表示当前shell的pid</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">COMMAND:正在运行的命令名的前9个字符</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">FD:文件描述符号以及访问类型(r--读，w--写，u--读写)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">TYPE:文件的类型(CHR--字符型，BLK--块型，DIR--目录，REG--常规文件)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">NAME：文件描述符所使用的文件的完整路径名</span></span><br></pre></td></tr></table></div></figure>

<p>现在编写一个简单的脚本<code>test</code>，本文主要是讲解文件描述符。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">exec 4&gt; four_data</span><br><span class="line"></span><br><span class="line">while [ $var -eq 10] #死循环</span><br><span class="line">do</span><br><span class="line">	var=10</span><br><span class="line">done</span><br></pre></td></tr></table></div></figure>

<p>使用<code>&amp;</code>将该脚本置入后台运行：<code>./test&amp;</code></p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ ./test&amp;</span><br><span class="line">[1] 88214</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ps</span><br><span class="line">    PID TTY          TIME CMD</span><br><span class="line">  88084 pts/3    00:00:00 bash</span><br><span class="line">  88214 pts/3    00:00:19 test</span><br><span class="line">  88218 pts/3    00:00:00 ps</span><br></pre></td></tr></table></div></figure>

<p>再使用<code>lsof</code>来查看使用了哪些文件描述符</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ lsof -a -p 88214 -d 4</span><br><span class="line">COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF   NODE NAME</span><br><span class="line">test    88214 cyan    4w   REG    8,5        0 935362 /home/cyan/Templates/four_data</span><br></pre></td></tr></table></div></figure>

<p><code>-p 88214</code>是寻找进程为<code>pid=88214</code>的进程打开的文件，<code>-d 4</code>找到使用<code>4</code>文件描述符的文件，<code>-a</code>对<code>-p 88214</code> 和<code>-d 4</code>进行与运算。</p>
<p>所以，你也可以尝试以下命令</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsof -p pid</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看这个进程的文件到底占用了哪些描述符</span></span><br></pre></td></tr></table></div></figure>

<p>完成案例讲解，将<code>test</code>的进程杀死</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ kill 88214</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ ps</span><br><span class="line">    PID TTY          TIME CMD</span><br><span class="line">  88084 pts/3    00:00:00 bash</span><br><span class="line">  88243 pts/3    00:00:00 ps</span><br><span class="line">[1]+  Terminated              ./test</span><br></pre></td></tr></table></div></figure>

<p><code>lsof</code>命令很强大，这里我们只是用来查看文件描述符，如果你想要深入了解，可以参考以下文章</p>
<blockquote>
<p>Linux 查看端口占用情况：<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.runoob.com/w3cnote/linux-check-port-usage.html" >https://www.runoob.com/w3cnote/linux-check-port-usage.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>lsof命令详解：<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/klausage/p/14995042.html" >https://www.cnblogs.com/klausage/p/14995042.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> （其实并不是很详细）</p>
<p>lsof入门：<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.qieseo.com/162896.html" >https://www.qieseo.com/162896.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</blockquote>

        <h1 id="阻止命令输出"   >
          <a href="#阻止命令输出" class="heading-link"><i class="fas fa-link"></i></a><a href="#阻止命令输出" class="headerlink" title="阻止命令输出"></a>阻止命令输出</h1>
      <p><code>Linux</code>有一个文件叫<code>null(/dev/null)</code>，<code>shell</code>输出到<code>null</code>文件的任何数据都不会被保存，全部都被丢掉。所以，不希望后台输出错误信息时，<code>shell</code>发送电子邮件给进程属主的话，就将<code>STDERR</code>重定向到<code>null</code>。<code>null</code>文件可以快速清除现有文件中的数据而不需要删除文件再重新创建<code>cat /dev/null &gt; testfile</code>，类似于清空日志文件。哦，其实我个人更喜欢<code>echo &quot;&quot; &gt; testfile</code>。</p>

        <h1 id="创建临时文件"   >
          <a href="#创建临时文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#创建临时文件" class="headerlink" title="创建临时文件"></a>创建临时文件</h1>
      <p><code>/tmp</code>目录是<code>Linux</code>用来存放不永久保留的文件，大部分<code>Linux</code>发行版配置了系统在启动时自动删除<code>/tmp</code>目录的所有文件。任何用户账户都有权限在<code>/tmp</code>读写。<br>单独<code>mktemp</code>命令可以在<code>/tmp</code>目录中创建一个唯一的临时文件。<code>shell</code>会创建该文件，但不是使用默认的<code>umask</code>，会将文件读和写权限分给属主，并将你设为属主。但是其他人没法访问(root除外)。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ mktemp</span><br><span class="line">/tmp/tmp.thPVXNPVJp</span><br></pre></td></tr></table></div></figure>

<p>也可以自定义文件名，但是会在当前目录下创建该文件</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mktemp</span>会用6个字符替换6个X，保证文件名唯一</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ mktemp test.XXXXXX</span><br><span class="line">test.k5CvV0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在脚本中，一般将创建的文件名保存在变量中</span></span><br><span class="line">filename=$(mktemp test.XXXXXX)</span><br></pre></td></tr></table></div></figure>

<p>还可以使用选项</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在/tmp下创建，返回全路径名</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ mktemp -t test.XXXXXX</span><br><span class="line">/tmp/test.LRNlpY</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-d选项创建临时目录</span></span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ mktemp -d dir.XXXXXX</span><br><span class="line">dir.Adr0Q6</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ mktemp -d -t dir.XXXXXX</span><br><span class="line">/tmp/dir.H9rIut</span><br></pre></td></tr></table></div></figure>




        <h1 id="记录消息"   >
          <a href="#记录消息" class="heading-link"><i class="fas fa-link"></i></a><a href="#记录消息" class="headerlink" title="记录消息"></a>记录消息</h1>
      <p><code>tee</code>命令：<br>    相当于管道的<code>T</code>型接头，将从<code>STDIN</code>过来的数据同时发送到<code>STDOUT</code>和<code>tee</code>命令行所指定的文件名：<code>tee testfile</code>。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$  date | tee testfile</span><br><span class="line">2022年 08月 03日 星期三 15:51:57 CST</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat testfile</span><br><span class="line">2022年 08月 03日 星期三 15:51:57 CST</span><br></pre></td></tr></table></div></figure>

<p><code>tee</code>每次都会覆盖文件内容，<code>-a</code>选型是追加模式：<code>who | tee -a testfile</code>。</p>

        <h1 id="实例"   >
          <a href="#实例" class="heading-link"><i class="fas fa-link"></i></a><a href="#实例" class="headerlink" title="实例"></a>实例</h1>
      <p>下面脚本涉及<code>sql</code>语句，如果你不会，可以跳过。该脚本主要是从.csv文件中读取数据快速生成<code>sql</code>执行文件。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">文件名create_sql_file</span></span><br><span class="line"></span><br><span class="line">outfile=&#x27;members.sql&#x27; # 要输出的文件</span><br><span class="line">IFS=&#x27;,&#x27; # 重新定义分隔符</span><br><span class="line">while read lname fname address city state zip</span><br><span class="line">do</span><br><span class="line">    cat &gt;&gt; $outfile &lt;&lt; EOF</span><br><span class="line">INSERT INTO members (lname,fname,address,city,state,zip) VALUES</span><br><span class="line">(&#x27;$lname&#x27;,&#x27;$fname&#x27;,&#x27;$address&#x27;,&#x27;$city&#x27;,&#x27;$state&#x27;,&#x27;$zip&#x27;)</span><br><span class="line">EOF</span><br><span class="line">done &lt; $&#123;1&#125; # read的标准输入重定向到$&#123;1&#125;文件。</span><br></pre></td></tr></table></div></figure>

<p>直接使用<code>cat &lt;&lt; file</code>可以追加数据到文件中，然后使用<code>ctrl+d</code>结束。也可以使用<code>&lt;&lt; 结束符</code>，通过输入结束符来结束输入。</p>
<p>我们写一个<code>mebers.csv</code>数据</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat members.csv</span><br><span class="line">Cyan,Jack,US,qiqo,iasui,iwah</span><br><span class="line">Mike,Smith,Japen,isaui,uwif,ianas</span><br></pre></td></tr></table></div></figure>

<p>然后运行脚本生成<code>sql</code>文件。</p>
<figure class="highlight shell"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cyan@cyan-virtual-machine:~/Templates$ ./create_sql_file members.csv</span><br><span class="line">cyan@cyan-virtual-machine:~/Templates$ cat members.sql</span><br><span class="line">INSERT INTO members (lname,fname,address,city,state,zip) VALUES</span><br><span class="line">(&#x27;Cyan&#x27;,&#x27;Jack&#x27;,&#x27;US&#x27;,&#x27;qiqo&#x27;,&#x27;iasui&#x27;,&#x27;iwah&#x27;)</span><br><span class="line">INSERT INTO members (lname,fname,address,city,state,zip) VALUES</span><br><span class="line">(&#x27;Mike&#x27;,&#x27;Smith&#x27;,&#x27;Japen&#x27;,&#x27;isaui&#x27;,&#x27;uwif&#x27;,&#x27;ianas&#x27;)</span><br></pre></td></tr></table></div></figure>

</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">本文作者: </span><span class="copyright-author__value"><a href="https://cecilia.cool">Cyan</a></span></div><div class="copyright-link"><span class="copyright-link__name">本文链接: </span><span class="copyright-link__value"><a href="https://cecilia.cool/2022/08/03/Shell/%E5%91%88%E7%8E%B0%E6%95%B0%E6%8D%AE/">https://cecilia.cool/2022/08/03/Shell/%E5%91%88%E7%8E%B0%E6%95%B0%E6%8D%AE/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">版权声明: </span><span class="copyright-notice__value">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_tw" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="https://cecilia.cool/tags/shell/">shell</a></span></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2022/08/04/Shell/%E6%8E%A7%E5%88%B6%E8%84%9A%E6%9C%AC/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">控制脚本</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2022/08/02/Shell/%E5%A4%84%E7%90%86%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5/"><span class="paginator-prev__text">处理用户输入</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">
          简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-number">2.</span> <span class="toc-text">
          标准文件描述符</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E4%B8%AD%E7%9A%84%E6%A0%87%E5%87%86%E9%87%8D%E5%AE%9A%E5%90%91%E8%BE%93%E5%87%BA%E5%92%8C%E8%BE%93%E5%85%A5"><span class="toc-number">3.</span> <span class="toc-text">
          脚本中的标准重定向输出和输入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">3.1.</span> <span class="toc-text">
          临时重定向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B0%B8%E4%B9%85%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">3.2.</span> <span class="toc-text">
          永久重定向</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">4.</span> <span class="toc-text">
          自定义重定向</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#lsof%E5%91%BD%E4%BB%A4"><span class="toc-number">5.</span> <span class="toc-text">
          lsof命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%98%BB%E6%AD%A2%E5%91%BD%E4%BB%A4%E8%BE%93%E5%87%BA"><span class="toc-number">6.</span> <span class="toc-text">
          阻止命令输出</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">
          创建临时文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AF"><span class="toc-number">8.</span> <span class="toc-text">
          记录消息</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B"><span class="toc-number">9.</span> <span class="toc-text">
          实例</span></a></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/icons/logo.png" alt="avatar"></div><p class="sidebar-ov-author__text">You have lots more to work on</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">50</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">2</div><div class="sidebar-ov-state-item__name">分类</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">7</div><div class="sidebar-ov-state-item__name">标签</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_tw" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">你已阅读了 </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2022</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Cyan</span></div><div><span>由 <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> 强力驱动</span><span> v6.2.0</span><span class="footer__devider">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.7.0</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.7.0"></script><script src="/js/stun-boot.js?v=2.7.0"></script><script src="/js/scroll.js?v=2.7.0"></script><script src="/js/header.js?v=2.7.0"></script><script src="/js/sidebar.js?v=2.7.0"></script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>