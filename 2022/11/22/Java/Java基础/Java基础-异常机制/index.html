<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.jpg"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><link rel="mask-icon" href="/images/logo.svg" color=""><link rel="manifest" href="/images/manifest.json"><meta name="msapplication-config" content="/images/browserconfig.xml"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="慕青の迷途" href="https://cecilia.cool/rss.xml"><link rel="alternate" type="application/atom+xml" title="慕青の迷途" href="https://cecilia.cool/atom.xml"><link rel="alternate" type="application/json" title="慕青の迷途" href="https://cecilia.cool/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Java基础"><link rel="canonical" href="https://cecilia.cool/2022/11/22/Java/Java%E5%9F%BA%E7%A1%80/Java%E5%9F%BA%E7%A1%80-%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6/"><title>Java 基础 -- 异常机制 | 慕青の迷途 = 冲天香阵透长安，满城尽带黄金甲</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Java 基础 -- 异常机制</h1><div class="meta"><span class="item" title="创建时间：2022-11-22 10:03:47"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-11-22T10:03:47+08:00">2022-11-22</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>5.8k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>5 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">慕青の迷途</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="http://s3.bmp.ovh/imgs/2023/01/01/fff2f78d1813e26f.jpg"></li><li class="item" data-background-image="http://s3.bmp.ovh/imgs/2023/01/01/2d50986289f4439b.jpg"></li><li class="item" data-background-image="http://s3.bmp.ovh/imgs/2023/01/01/6931f1b9e2f0bcb9.jpg"></li><li class="item" data-background-image="http://s3.bmp.ovh/imgs/2023/01/19/d57032385ca89b73.jpg"></li><li class="item" data-background-image="http://s3.bmp.ovh/imgs/2023/01/19/1004b58392784aa7.jpg"></li><li class="item" data-background-image="http://s3.bmp.ovh/imgs/2023/01/01/d51e0450b83fd2b6.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cecilia.cool/2022/11/22/Java/Java%E5%9F%BA%E7%A1%80/Java%E5%9F%BA%E7%A1%80-%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="Cyan"><meta itemprop="description" content="冲天香阵透长安，满城尽带黄金甲, 时雨病重症患者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="慕青の迷途"></span><div class="body md" itemprop="articleBody"><h1 id="异常机制"><a class="anchor" href="#异常机制">#</a> 异常机制</h1><p>先看类结构，再学使用，不然讲使用的时候会有点懵。</p><h2 id="异常层次结构"><a class="anchor" href="#异常层次结构">#</a> 异常层次结构</h2><p>Java 异常都是对象，是 <code>Throwable</code> 子类的实例。Java 通过 <code>Throwable</code> 众多子类描述各种不同的异常，描述出现在一段编码中的错误条件，当条件生成时，错误就会引发异常。</p><p><img data-src="https://s3.uuu.ovh/imgs/2022/11/22/960098a8cf4f5740.jpg" alt=""></p><blockquote><p>错误比异常更严重，当出现时，JVM 直接就崩了，本文主要讲的还是异常。</p></blockquote><p><code>Throwable</code> 包含了其线程创建时线程执行堆栈的快照，它提供了 <strong>printStackTrace()</strong> 等接口用于获取堆栈跟踪数据等信息。</p><p>对于异常，分为两种：</p><ul><li>运行时异常</li></ul><p>都是<strong> RuntimeException 类及其子类</strong>，比如 <code>NullPointerException</code> 异常，它就是继承 <code>RuntimeException</code> 异常。这种异常一般是由程序逻辑错误引起的，只有程序跑起来才会出现的异常，<strong>开发者在编写代码时也应该极力避免出现这种异常</strong>，这是程序员该做的事情，不应该交给编译器，所以编译器也不会检查它，即使没有 <code>try-catch</code> 捕获它，没有用 <code>throws</code> 声明，也能够编译通过。</p><p><strong>运行时异常和错误也叫做不可查异常，编译器不要求强制处置的异常</strong>。</p><ul><li>编译时异常</li></ul><p>也叫做非运行时异常，除了 <code>RuntimeException</code> 以外所有的异常。从<strong>程序语法角度</strong>讲是必须进行处理的异常，如果不处理，程序就不能编译通过。<strong>编译时异常也叫作可查异常</strong>，从一定程度上这种异常的发生是可以预料到的。</p><h2 id="异常的使用"><a class="anchor" href="#异常的使用">#</a> 异常的使用</h2><p>了解了异常的层次结构后，再来使用就明了很多。</p><h3 id="自定义异常"><a class="anchor" href="#自定义异常">#</a> 自定义异常</h3><p>自定义编译时异常只需要继承 <code>Exception</code> 即可：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CyanException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">CyanException</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 这里我们选择使用父类的带参构造，这个参数就是异常的原因</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>运行时异常继承 <code>RuntimeException</code> 即可：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CyanException</span> <span class="token keyword">extends</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">CyanException</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>有时我们会从 catch 中抛出一个异常，目的是为了改变异常的类型。多用于在多系统集成时，当某个子系统故障，异常类型可能有多种，可以用<strong>统一的异常类型向外暴露</strong>，不需暴露太多内部异常细节。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MyException</span> <span class="token punctuation">&#123;</span>    </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// code</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">MyException</span> ex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyException</span><span class="token punctuation">(</span><span class="token string">"read file failed."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        ex<span class="token punctuation">.</span><span class="token function">initCause</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">throw</span> ex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p><code>initCause</code> 方法就是：当我们 try 住某块代码发生了异常后，希望再 catch 中 throw 一个新的异常，但是又不希望丢失引起异常的原始异常则可以使用该方法设置原始异常到我们的新异常中。</p></blockquote><h3 id="抛出异常"><a class="anchor" href="#抛出异常">#</a> 抛出异常</h3><p>抛出异常就要用到关键字<strong> throws/throw</strong>。</p><p>如果一个方法中可能会出现异常（会出现异常的情况很多，比如代码执行语句存在出现异常的可能性，或者调用了一个可能抛出异常的方法），我们又没有在可能出现异常的地方捕获并处理它，那么就需要通过 <code>throws</code> 关键字<strong>申明</strong>当前方法可能出现的异常。</p><blockquote><p>在方法头中显式声明该异常，以便于告知方法调用者此方法有异常，需要进行处理。</p></blockquote><p>通常，<strong>应该捕获那些知道如何处理的异常，将不知道如何处理的异常继续传递下去</strong>。举个例子：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此时会报错</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><code>main</code> 调用了 <code>readFile</code> 方法，但是后者申明了自己这个方法可能会抛出 <code>IOException</code> 这个异常，所以 <code>main</code> 要么继续向上抛出 <code>IOException</code> ，即在 <code>main</code> 的方法头继续使用 <code>throws</code> 抛出，或者使用 <code>try-catch</code> 语句捕获这个异常并处理。</p><p><code>Throws</code> 抛出异常的其他规则：</p><ul><li><strong>如果是不可查异常（unchecked exception），即 Error、RuntimeException 或它们的子类，那么可以不使用 throws 关键字来声明要抛出的异常，编译仍能顺利通过，但在运行时会被系统抛出</strong>。</li><li>调用方法必须遵循任何可查异常的处理和声明规则。若覆盖一个方法，则不能声明与覆盖方法不同的异常。声明的任何异常必须是被覆盖方法所声明异常的同类或子类。</li></ul><p>学了 <code>throws</code> ，那么它和 <code>throw</code> 又有什么区别呢？为什么我要先讲 <code>throws</code> 呢？在学习 <code>throw</code> 之前，我们再次回顾一下：</p><ol><li>运行时异常比较宽松，不使用 <code>throws</code> ， <code>try-catch</code> 都可以，但是编译时异常必须要<strong>处理</strong>，要么捕获，要么继续向上抛（也就是当前方法不处理，交给我的调用者去处理）。</li><li>当前方法有一段代码，这段代码也可能是一个方法调用，总之，这段代码<strong>抛出</strong>了一个异常，我们就必须处理它。</li></ol><p>你可能疑惑为什么第 2 点和第 1 点后半部分一样。第 2 点我强调了<strong>抛出</strong>这个行为，第 1 点我强调了处理这个行为。<strong> <code>throw</code> 就是抛出这个行为</strong>，这就是需要知道的，除了代码本身逻辑有问题，比如：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Object</span> o <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>o<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>这样会自动抛出一个异常， <code>throw</code> 关键字就是主动抛出一个异常。</p><p>下面看个例子，加深一下理解：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 代码会标红报错，这样写是不对的</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"我是编译时异常！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 代码正常</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"我是运行时异常！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>为什么 <code>test1</code> 会报错呢？还是回到最上面的， <code>test1</code> 方法中有一个代码段抛出了一个异常，这个异常还是一个编译时异常，我们必须要捕获它或者继续向上抛出：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 解决 1：捕获该异常</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">try</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token comment">// 这个代码段抛出异常</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    	<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"我是编译时异常！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token function">cetch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 解决 2：抛出该异常</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"我是编译时异常！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>我们在重写方法时，如果父类中的方法表明了会抛出某个异常，只要重写的内容中不会抛出对应的异常我们可以直接省去，而重写方法抛出的异常，也不能超过父类的方法抛出的异常。</p><h3 id="捕获异常"><a class="anchor" href="#捕获异常">#</a> 捕获异常</h3><p>使用的语句有： <code>try-catch</code> ， <code>try-catch-finally</code> ， <code>try-finally</code> ， <code>try-with-resource</code> 。</p><p>着重讲一下：</p><ul><li><p><code>try-finally</code> ：常常用于资源的关闭或者解锁等。但是 <code>finally</code> 遇到以下情况就不会执行</p><ul><li><code>try</code> 中代码使用 <code>System.exit()</code> 退出程序</li><li><code>finally</code> 发生异常</li><li>程序所在线程死亡</li><li>关闭 CPU</li></ul><p>当 try 有 return 语句，没有产生异常时，执行到 return 语句时，会先算出 return 表达式的值，并将其保存起来。注意，此时没有返回，只是计算表达式的值并保存起来，然后再去执行 finally 代码块，如果 finally 代码块有 return 语句，程序执行到 return 语句，程序会提前结束，然后返回值，不会去执行 try 中的 return。</p><p><strong>当然，规范是你不应该在 finally 使用 return 语句</strong>。</p></li><li><p><code>try-with-resource</code> ：自动释放资源，但是该资源需要实现 <code>AutoCloseable</code> 接口</p></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span>  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">tryWithResourceTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"c:/abc"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// code</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// handle exception</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 离开 try 语句后自定关闭 Scanner 资源（调用 scanner.close ）</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>和把 scanner.close 方法放在 finally 代码块中不同的是，若 scanner.close 抛出异常，则会被抑制。</p><blockquote><p>到这里，异常基本算是说完了，但是还没有涉及原理部分。</p></blockquote><h2 id="深入理解异常"><a class="anchor" href="#深入理解异常">#</a> 深入理解异常</h2><blockquote><p>看一下底层实现和一些规范约束。</p></blockquote><h3 id="jvm处理异常机制"><a class="anchor" href="#jvm处理异常机制">#</a> JVM 处理异常机制</h3><p>先看一段代码：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>cyan</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token function">oneException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 一个可能抛出异常的方法</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">oneException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"抛出编译时异常"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>编译后，使用 <code>javap -c Main.class</code> 查看字节码文件：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token class-name">Code</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token number">0</span><span class="token operator">:</span> invokestatic  #<span class="token number">3</span>                  <span class="token comment">// Method oneException:()V</span></pre></td></tr><tr><td data-num="4"></td><td><pre>       <span class="token number">3</span><span class="token operator">:</span> <span class="token keyword">goto</span>          <span class="token number">11</span></pre></td></tr><tr><td data-num="5"></td><td><pre>       <span class="token number">6</span><span class="token operator">:</span> astore_0</pre></td></tr><tr><td data-num="6"></td><td><pre>       <span class="token number">7</span><span class="token operator">:</span> aload_0</pre></td></tr><tr><td data-num="7"></td><td><pre>       <span class="token number">8</span><span class="token operator">:</span> invokevirtual #<span class="token number">5</span>                  <span class="token comment">// Method java/lang/Exception.printStackTrace:()V</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token number">11</span><span class="token operator">:</span> <span class="token keyword">return</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token class-name">Exception</span> table<span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>       from    <span class="token keyword">to</span>  <span class="token namespace">target</span> type</pre></td></tr><tr><td data-num="11"></td><td><pre>           <span class="token number">0</span>     <span class="token number">3</span>     <span class="token number">6</span>   <span class="token class-name">Class</span> java<span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">Exception</span></pre></td></tr></table></figure><p>发现有一个异常表：</p><ul><li><strong>from</strong> 可能发生异常的起始点</li><li><strong>to</strong> 可能发生异常的结束点</li><li><strong>target</strong> 上述 from 和 to 之前发生异常后的异常处理者的位置</li><li><strong>type</strong> 异常处理者处理的异常的类信息</li></ul><p>JVM 处理异常的一些机制：</p><ol><li>JVM 会在当前出现异常的方法中，查找异常表，是否有合适的处理者来处理</li><li>如果当前方法异常表不为空，并且<strong>异常符合处理者的 from 和 to 节点，并且 type 也匹配</strong>，则 JVM 调用位于 target 的调用者来处理。</li><li><strong>如果上一条未找到合理的处理者，则继续查找异常表中的剩余条目</strong>。</li><li>如果当前方法的异常表无法处理，则<strong>向上查找</strong>（弹栈处理）刚刚调用该方法的调用处，并重复上面的操作。</li><li>如果所有的栈帧被弹出，仍然没有处理，则抛给当前的 Thread，Thread 则会终止。</li><li>如果当前 Thread 为最后一个非守护线程，且未处理异常，则会导致 JVM 终止运行。</li></ol><h3 id="异常耗时"><a class="anchor" href="#异常耗时">#</a> 异常耗时</h3><p>使用异常是更加耗时间的，不同语言的耗时原因也可能各有不同。在 Java 中，创建一个异常对象，比创建一个普通 Object 对象耗时得多，20 倍以上（使用 <code>System.nanoTime()</code> 可以检验）。</p><p>有这么一段代码：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">validateInteger</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">try</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>     <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>         <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>     <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>     <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>当时这个帖子的讨论链接：<span class="exturl" data-url="aHR0cHM6Ly93d3cuaXRleWUuY29tL3RvcGljLzg1NjIyMQ==">https://www.iteye.com/topic/856221</span></p><p>楼主提问：验证 String 是不是整数，用异常作判断怎么了！</p><p>这种通过异常来代替控制语句的方式，我这学期（大三上）的全栈开发老师也提到过（c# 语言），老师的观点就比较中肯：咱没测试过谁快，咱也不瞎说，只是说，用异常代替控制流不会出现语法错误。</p><p>然后那节课老师放 b 站了，有个网友是这么评价的：</p><p><strong>异常处理确实比 if 慢，因为异常会通过内核调用激活 Windows 标准异常处理机制。这必然会导致异常代码从用户态到内核态再回到用户态，这样绕一圈开销是很大的。</strong><br><strong>另外，异常和 if 在语义是是有区分的，只是很多人乱用。if 是正常流程的分支，在不同情况做不同工作。异常则表示程序遇到了不在正常流程设计中的情况，至少对写抛出异常语句的那个人来说是这样，我不知道这时应该怎么办，只能把错误报告给外面，寻找知道该怎么办的人。如果直到栈顶都没找到，操作系统就会为了保护自己和其他程序的安全把进程干掉。因此异常要顺着调用栈往上爬，寻找知道知道如何处理的人或者等死。</strong></p><blockquote><p>我看完帖子后，感觉这种说法也没说到点子上，也许这种说法是符合规范的，但是没有说出楼主问题的本质。</p></blockquote><p>帖子讨论的问题是到底怎么了，有些人是从性能方面解释的，通过暴力判断字符串是不是由数字组成耗时和异常比较，没出异常两个都是差不多的，但是出了异常就是前者更快。但是楼主本身是知道异常更慢的，他的观点在于，Java 更应该是便利程序开发，对于这个问题，这点时间是可以忽略的。</p><blockquote><p>具体讨论了什么你们自己去看看吧</p></blockquote><p>还有个大佬的文章也可以参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cucHVkbi5jb20vbmV3cy82MjhmODMyYmJmMzk5YjdmMzUxZTcyODQuaHRtbA==">https://www.pudn.com/news/628f832bbf399b7f351e7284.html</span></p><h1 id="参考"><a class="anchor" href="#参考">#</a> 参考</h1><blockquote><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmcwOTA3L2FydGljbGUvZGV0YWlscy8xMTQxNDM3MzU=">https://blog.csdn.net/wang0907/article/details/114143735</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9wZGFpLnRlY2gvbWQvamF2YS9iYXNpYy9qYXZhLWJhc2ljLXgtZXhjZXB0aW9uLmh0bWw=">https://pdai.tech/md/java/basic/java-basic-x-exception.html</span></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL3Fpbmdrb25neGlhZ3VhbmcvamF2YXNlL3pxdTJmeSNlMzNkYjg0NQ==">https://www.yuque.com/qingkongxiaguang/javase/zqu2fy#e33db845</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NvbmdfNjY2Ni9hcnRpY2xlL2RldGFpbHMvMTIzNjA0OTI0P29wc19yZXF1ZXN0X21pc2M9JmFtcDtyZXF1ZXN0X2lkPSZhbXA7Yml6X2lkPTEwMiZhbXA7dXRtX3Rlcm09JTI3cmV0dXJuJTI3JTIwaW5zaWRlJTIwJTI3ZmluYWxseSUyNyUyMGJsb2MmYW1wO3V0bV9tZWRpdW09ZGlzdHJpYnV0ZS5wY19zZWFyY2hfcmVzdWx0Lm5vbmUtdGFzay1ibG9nLTJ+YWxsfnNvYmFpZHV3ZWJ+ZGVmYXVsdC0yLTEyMzYwNDkyNC4xNDIlNUV2NjYlNUVwY19yYW5rXzM0X3F1ZXJ5cmVsZXZhbnQyNSwyMDElNUV2MyU1RWNvbnRyb2xfMSwyMTMlNUV2MiU1RXQzX2VzcXVlcnlfdjEmYW1wO3NwbT0xMDE4LjIyMjYuMzAwMS40MTg3">try-finally 存在 return</span></p></blockquote><div class="tags"><a href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag"><i class="ic i-tag"></i> Java基础</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-11-22 14:31:52" itemprop="dateModified" datetime="2022-11-22T14:31:52+08:00">2022-11-22</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Cyan <i class="ic i-at"><em>@</em></i>慕青の迷途</li><li class="link"><strong>本文链接：</strong> <a href="https://cecilia.cool/2022/11/22/Java/Java%E5%9F%BA%E7%A1%80/Java%E5%9F%BA%E7%A1%80-%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6/" title="Java 基础 -- 异常机制">https://cecilia.cool/2022/11/22/Java/Java基础/Java基础-异常机制/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2022/11/21/Java/Java%E5%9F%BA%E7%A1%80/Java%E5%9F%BA%E7%A1%80-%E6%B3%A8%E8%A7%A3%E6%9C%BA%E5%88%B6/" itemprop="url" rel="prev" data-background-image="http:&#x2F;&#x2F;s3.bmp.ovh&#x2F;imgs&#x2F;2023&#x2F;01&#x2F;01&#x2F;10ae4369630f97f2.png" title="Java基础--注解机制"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>Java基础--注解机制</h3></a></div><div class="item right"><a href="/2022/11/22/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%93%88%E5%B8%8C/" itemprop="url" rel="next" data-background-image="http:&#x2F;&#x2F;s3.bmp.ovh&#x2F;imgs&#x2F;2023&#x2F;01&#x2F;19&#x2F;d57032385ca89b73.jpg" title="字符串哈希"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>字符串哈希</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6"><span class="toc-number">1.</span> <span class="toc-text">异常机制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.</span> <span class="toc-text">异常层次结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.</span> <span class="toc-text">异常的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="toc-number">1.2.1.</span> <span class="toc-text">自定义异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8"><span class="toc-number">1.2.2.</span> <span class="toc-text">抛出异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8"><span class="toc-number">1.2.3.</span> <span class="toc-text">捕获异常</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%BC%82%E5%B8%B8"><span class="toc-number">1.3.</span> <span class="toc-text">深入理解异常</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#jvm%E5%A4%84%E7%90%86%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6"><span class="toc-number">1.3.1.</span> <span class="toc-text">JVM 处理异常机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E8%80%97%E6%97%B6"><span class="toc-number">1.3.2.</span> <span class="toc-text">异常耗时</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">2.</span> <span class="toc-text">参考</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Cyan" data-src="/images/avatar.png"><p class="name" itemprop="name">Cyan</p><div class="description" itemprop="description">时雨病重症患者</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">136</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">1</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">21</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0N5YW4tTg==" title="https:&#x2F;&#x2F;github.com&#x2F;Cyan-N"><i class="ic i-github"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2022/11/21/Java/Java%E5%9F%BA%E7%A1%80/Java%E5%9F%BA%E7%A1%80-%E6%B3%A8%E8%A7%A3%E6%9C%BA%E5%88%B6/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2022/11/22/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%93%88%E5%B8%8C/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"></div><div class="status"><div class="copyright">&copy; 2022 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Cyan @ 慕青の迷途</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">544k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">8:15</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2022/11/22/Java/Java基础/Java基础-异常机制/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(a){return a.includes("#")},function(a){return new RegExp(LOCAL.path+"$").test(a)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>